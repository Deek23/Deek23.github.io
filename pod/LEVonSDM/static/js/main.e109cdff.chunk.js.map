{"version":3,"sources":["slider-height.js","slider-planting.js","slider-sapling_price.js","slider-revenue.js","slider-management_cost.js","slider-MAI.js","selector-sp.js","selector-id.js","selector-DR.js","selector-PY.js","card-sdm.js","sdm-core.js","sdm-diagram.js","card-lev.js","optimal-planting.js","card-lev_time_course.js","App.js","reportWebVitals.js","lev-core.js","reducer-LEVonSDM.js","index.js"],"names":["WideTooltip","styled","className","props","Tooltip","classes","popper","tooltipClasses","tooltip","maxWidth","SliderHeight","dispatch","useDispatch","height","useSelector","state","setHeight","newHeight","type","payload","Typography","id","title","placement","arrow","Grid","container","spacing","alignItems","sx","mb","xs","sm","width","md","item","display","Slider","value","onChange","event","inputHeight","getAriaValueText","v","min","max","valueLabelDisplay","marks","label","Input","backgroundColor","ml","endAdornment","InputAdornment","position","margin","target","NaN","Number","onBlur","inputProps","step","inputmode","enterkeyhint","SliderPlanting","planting","setPlanting","newPlanting","gutterBottom","mt","inputPlanting","SliderPriceSapling","priceSapling","setPriceSapling","newPriceSapling","SliderRevenue","revenue","setRevenue","newRevenue","useState","balance","setBalance","newBalance","Math","abs","SliderCostManagement","costManagement","setCostManagement","newCostManagement","SliderMAI","mai","setMAI","newMAI","p","SelectorSp","sp","FormControl","minWidth","padding","InputLabel","Select","labelId","newSp","MenuItem","SelectorID","selectedParameters","require","filter","d","spID","newID","map","ID","area","SelectorDR","discountingRate","setDiscountingRate","newDR","Box","mx","htmlFor","OutlinedInput","SelectorPY","processYield","setProcessYield","newPY","CalcSDMSummary","sdm","outMaxD","densityHMaxD","outMaxV","volumeMaxD2","outDV","PH2DV2","outRy","volume","Card","heigh","boxShadow","CardHeader","CardContent","m","l","component","textAlign","size","round","density","color","parameters","SDMDiagram","setParms","inputID","a","localID","lp","lk1","b4","b2","setK2l","k1","Rf","b3","b1","setK5l","k2","k5","this","setK5","volumeI","volumeA","dMax","density2","resultD","brentsMethod","x","volumeHD2","errorTolerance","maxIterations","resultV","altDensity","altVolume","maximumDensity","minimize","tolerance","lowerBound","upperBound","DrawSDMDiagram","plantingInput","dv","xTop","xBottom","Array","fill","_","i","ry","localDC","yTop","ceil","bottomTmp","yBottom","floor","densityScale","scaleLog","domain","clamp","volumeScale","nThinning","flatMap","y","evenHeight","h","concat","MaxD","vol","labelEvenHeight","length","dvMaxD","outDensity","ryTarget","r","den","densityHV2","labelRy","legendScale","scaleOrdinal","range","top","right","bottom","left","xMax","yMax","rx","Group","GridRows","scale","stroke","GridColumns","x1","x2","y1","y2","AxisBottom","tickValues","tickFormat","labelProps","fontSize","textAnchor","AxisLeft","numTicks","data","index","LinePath","curve","curveBasis","strokeWidth","strokeOpacity","curveCardinal","Text","verticalAnchor","curveNatural","strokeDasharray","horizontalAnchor","GlyphStar","variant","align","lineHeight","mr","direction","itemDirection","shape","labelMargin","CalcLEVSummary","lev","optP","optV","costMgmt","thresholdYear","threshold","thresholdMAI","isNaN","revenueForestry","fc","npvOutput","npv","levOutput","irrOutput","irr","OptimalPlanting","balanceData","cost","optPlantingData","back","revenueMax","plantingScale","scaleLinear","balanceScale","Annotation","dx","dy","Connector","Label","backgroundFill","showAnchorLine","anchorLineStroke","backgroundProps","fontColor","titleFontSize","titleFontWeight","titleProps","subtitle","subtitleFontSize","subtitleDy","subtitleProps","Maxwidth","LineSubject","orientation","ChartLEV","optVol","dataLEV","levTimeCourse","maxLEV","reduce","b","yearLevMax","indexOf","yearOpt","levOpt","dataLevChart","year","dataLevMax","dataOpt","yearScale","levScale","curveLinear","CircleSubject","radius","backgroundPadding","drawerWidth","App","window","theme","useTheme","DrawerHeader","mixins","toolbar","justifyContent","ExpandMore","expand","other","IconButton","transform","marginLeft","transition","transitions","create","duration","shortest","mobileOpen","setMobileOpen","handleDrawerToggle","expanded1","setExpanded1","expanded2","setExpanded2","expanded3","setExpanded3","expanded4","setExpanded4","localSDM","localDV","localHeight","localPlanting","localOptP","optPlanting","localOptV","optVolume","localLEV","localPriceS","localCostM","localMAI","drawer","Toolbar","Divider","px","List","ListItem","console","log","undefined","document","body","CssBaseline","AppBar","edge","onClick","noWrap","flexShrink","Drawer","open","onClose","ModalProps","keepMounted","boxSizing","elevation","zIndex","CardActions","disableSpacing","fontWeight","Collapse","in","timeout","unmountOnExit","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","LEV","rPN","cM","cS","pY","dR","revenueProductionNet","costSapling","resultY","out","c","initialState","levOnSDM","action","estPlanting","estVolume","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e109cdff.chunk.js","sourcesContent":["\nimport React from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\n\n// Material-UI selector （var 5）\nimport Typography from '@mui/material/Typography';\nimport Grid from '@mui/material/Grid';\nimport Slider from '@mui/material/Slider';\nimport Input from '@mui/material/Input';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport { styled } from '@mui/styles';\nimport Tooltip, { tooltipClasses } from '@mui/material/Tooltip';\n//\n\n// サイズ指定可能なtool-tipボックス\nconst WideTooltip = styled(({ className, ...props }) => (\n    <Tooltip {...props} classes={{ popper: className }} />\n  ))({\n    [`& .${tooltipClasses.tooltip}`]: {\n      maxWidth: 300,\n    },\n  });\n\n// コンポーネント本体\nfunction SliderHeight() {\n  // 各種hook設定\n  const dispatch = useDispatch();\n  const height = useSelector(state => state.height);\n  const setHeight = (newHeight) =>{\n    dispatch({type: 'SET_HEIGHT', payload: newHeight});\n  }\n\n  // 目標樹高調整ハンドラ\n  const textHeightSlider = `\n    目標とする樹高を設定\n    `;\n  const handleHeightSlider = (event, inputHeight) => {\n    setHeight(inputHeight)\n  };\n  const handleHeightInput = (event) => {\n    setHeight(event.target.value === '' ? NaN : Number(event.target.value));\n  };\n  const handleHeightBlur = () => {\n    if (height < 10) {\n      setHeight(10);\n    } else if (height > 60) {\n      setHeight(60);\n    }\n  };\n  const hMarks = [\n    { value: 10, label: '10m', },\n    { value: 20, label: '20m', },\n    { value: 50, label: '50m', },\n  ];\n\n  // 出力\n  return (\n    <>\n      {/*樹高スライダー*/}\n      <Typography id=\"height-input-tile\">\n        樹高\n      </Typography>\n      <WideTooltip title={textHeightSlider} placement=\"bottom\" arrow>\n        <Grid container id=\"height-inputs\" spacing={4} alignItems=\"center\"\n          sx={{\n            mb: { xs: 1, sm: 2},\n            width: {xs: 180, sm: 180, md: 460,},\n          }}\n        >\n          <Grid item id=\"height-slider\" sx={{display: { xs: 'none', sm: 'block'} }} xs>\n            <Slider\n              value={typeof height === 'number' ? height : 10}\n              onChange={handleHeightSlider}\n              getAriaValueText={(v) => { return ('{$v}m') }}\n              aria-labelledby=\"height-inputs\"\n              min={10}\n              max={50}\n              valueLabelDisplay=\"auto\"\n              marks={hMarks}\n              \n            />\n          </Grid>\n          <Grid item id=\"height-number\" >\n            <Input\n              sx={{\n                backgroundColor: \"#ffffff\",\n                ml: { xs: 4, sm: 2, md: 2, },\n                width: 81,\n              }}\n              value={height}\n              endAdornment={<InputAdornment position=\"end\">m</InputAdornment>}\n              margin=\"dense\"\n              onChange={handleHeightInput}\n              onBlur={handleHeightBlur}\n              inputProps={{\n                step: 1,\n                min: 10,\n                max: 50,\n                type: 'number',\n                'aria-labelledby': 'height-inputs',\n              }}\n              inputmode=\"numeric\"\n              enterkeyhint=\"done\"\n            />\n          </Grid>\n        </Grid>\n      </WideTooltip>\n    </>\n  );\n}\n\nexport default SliderHeight;\n","\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\n// Material-UI selector （var 5）\nimport Typography from '@mui/material/Typography';\nimport Grid from '@mui/material/Grid';\nimport Slider from '@mui/material/Slider';\nimport Input from '@mui/material/Input';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport { styled } from '@mui/styles';\nimport Tooltip, { tooltipClasses } from '@mui/material/Tooltip';\n//\n\n// サイズ指定可能なtool-tipボックス\nconst WideTooltip = styled(({ className, ...props }) => (\n  <Tooltip {...props} classes={{ popper: className }} />\n))({\n  [`& .${tooltipClasses.tooltip}`]: {\n    maxWidth: 300,\n  },\n});\n\n// コンポーネント本体\nfunction SliderPlanting() {\n  // 各種hook設定\n  const dispatch = useDispatch();\n  const planting = useSelector(state => state.planting);\n  const setPlanting = (newPlanting) => {\n    dispatch({ type: 'SET_PLANTING', payload: newPlanting });\n  }\n\n  // 目標樹高調整ハンドラ\n  // 植栽本数調整\n  const textPlantingSlider = `\n    植栽本数を設定。間伐による個体数調整もこの値を変化させることで擬似的に可能です。\n    `;\n  const handlePlantingSlider = (event, inputPlanting) => {\n    setPlanting(inputPlanting);\n  };\n  const handlePlantingInput = (event) => {\n    setPlanting(event.target.value === '' ? NaN : Number(event.target.value));\n  };\n  const handlePlantingBlur = () => {\n    if (planting < 100) {\n      setPlanting(100);\n    } else if (planting > 5000) {\n      setPlanting(5000);\n    }\n  };\n  const dMarks = [\n    { value: 500, label: '500本', },\n    { value: 1000, },\n    { value: 1500, },\n    { value: 2000, },\n    { value: 2500, },\n    { value: 3000, },\n    { value: 3500, },\n    { value: 4000, },\n    { value: 4500, },\n    { value: 5000, label: '5000本', },\n  ];\n\n  // 出力\n  return (\n    <>\n      {/*苗木本数スライダー*/}\n      <Typography id=\"planting-input-title\" gutterBottom\n        sx={{\n          mt: { xs: 2 },\n          ml: { xs: 1 },\n        }}\n      >\n        植栽本数\n      </Typography>\n      <WideTooltip title={textPlantingSlider} placement=\"bottom\" arrow>\n        <Grid container id=\"planting-inputs\" spacing={4} alignItems=\"center\"\n          sx={{\n            mb: { xs: 1, sm:2 },\n            width: {xs: 180, sm: 180, md: 460,},\n          }}\n        >\n          <Grid item id=\"planting-slider\" sx={{display: { xs: 'none', sm: 'block'} }} xs>\n            <Slider\n              value={typeof planting === 'number' ? planting : 2500}\n              onChange={handlePlantingSlider}\n              getAriaValueText={(v) => { return ('{$v}本') }}\n              aria-labelledby=\"planting-inputs\"\n              step={500}\n              //marks\n              marks={dMarks}\n              min={500}\n              max={5000}\n              valueLabelDisplay=\"auto\"\n            />\n          </Grid>\n          <Grid item id=\"planting-number\">\n            <Input\n              sx={{\n                backgroundColor: \"#ffffff\",\n                ml: { xs: 4, sm: 2, md: 1, },\n                width: 81,\n              }}\n              value={planting}\n              endAdornment={<InputAdornment position=\"end\">本</InputAdornment>}\n              margin=\"dense\"\n              onChange={handlePlantingInput}\n              onBlur={handlePlantingBlur}\n              inputProps={{\n                step: 100,\n                min: 100,\n                max: 5000,\n                type: 'number',\n                'aria-labelledby': 'planting-inputs',\n              }}\n              inputmode=\"numeric\"\n              enterkeyhint=\"done\"\n            />\n          </Grid>\n        </Grid>\n      </WideTooltip>\n    </>\n  );\n}\n\nexport default SliderPlanting;\n","\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\n// Material-UI selector （var 5）\nimport Typography from '@mui/material/Typography';\nimport Grid from '@mui/material/Grid';\nimport Slider from '@mui/material/Slider';\nimport Input from '@mui/material/Input';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport { styled } from '@mui/styles';\nimport Tooltip, { tooltipClasses } from '@mui/material/Tooltip';\n//\n\n// サイズ指定可能なtool-tipボックス\nconst WideTooltip = styled(({ className, ...props }) => (\n  <Tooltip {...props} classes={{ popper: className }} />\n))({\n  [`& .${tooltipClasses.tooltip}`]: {\n    maxWidth: 300,\n  },\n});\n\n// コンポーネント本体\nfunction SliderPriceSapling() {\n  // 各種hook設定\n  const dispatch = useDispatch();\n  const priceSapling = useSelector(state => state.priceSapling);\n  const setPriceSapling = (newPriceSapling) => {\n    dispatch({ type: 'SET_SAPLING_PRISE', payload: newPriceSapling });\n  }\n\n  // 苗木価格調整\n  const textPsSlider = `\n    苗木コストを設定。苗木単価に加えて、基肥・単木保護資材コストなどを考慮しても良いかも知れません。スライダーは50～200円の範囲ですが、入力窓は最高3000円まで設定できます。\n    `;\n  const handlePriceSaplingSlider = (event, newPriceSapling) => {\n    setPriceSapling(newPriceSapling);\n  };\n  const handlePriceSaplingInput = (event) => {\n    setPriceSapling(event.target.value === '' ? NaN : Number(event.target.value));\n  };\n  const handlePriceSaplingBlur = () => {\n    if (priceSapling < 50) {\n      setPriceSapling(50);\n    } else if (priceSapling > 3000) {\n      setPriceSapling(3000);\n    }\n  };\n  const csMarks = [\n    { value: 50, label: '50', },\n    { value: 100, label: '100', },\n    { value: 150, label: '150', },\n    { value: 200, label: '200円', },\n  ];\n\n  // 出力\n  return (\n    <>\n      {/*苗木コストスライダ*/}\n      <Typography id=\"price-input-title\">\n        苗木価格\n      </Typography>\n      <WideTooltip title={textPsSlider} placement=\"top-start\" arrow>\n        <Grid container id=\"price-inputs\" spacing={4} alignItems=\"center\"\n          sx={{\n            mb: { xs: 3 },\n            width: {xs: 180, sm: 180, md: 460,},\n          }}\n        >\n          <Grid item id=\"price-slider\" sx={{display: { xs: 'none', sm: 'block'} }} xs>\n            <Slider\n              value={typeof priceSapling === 'number' ? priceSapling : 100}\n              onChange={handlePriceSaplingSlider}\n              getAriaValueText={(v) => { return ('{$v}円') }}\n              aria-labelledby=\"priceSapling-slider\"\n              step={10}\n              marks={csMarks}\n              min={50}\n              max={200}\n              valueLabelDisplay=\"auto\"\n            />\n          </Grid>\n          <Grid item id=\"price-number\" >\n            <Input\n              sx={{\n                backgroundColor: \"#ffffff\",\n                ml: { xs: 4, sm: 2, md: 2 },\n                width: 115,\n              }}\n              endAdornment={<InputAdornment position=\"end\"><span>円･本<sup>-1</sup></span></InputAdornment>}\n              value={priceSapling}\n              margin=\"dense\"\n              onChange={handlePriceSaplingInput}\n              onBlur={handlePriceSaplingBlur}\n              inputProps={{\n                step: 10,\n                min: 50,\n                max: 3000,\n                type: 'number',\n                'aria-labelledby': 'priceSapling-slider',\n              }}\n              inputmode=\"numeric\"\n              enterkeyhint=\"done\"\n            />\n          </Grid>\n        </Grid>\n      </WideTooltip>\n    </>\n  );\n}\n\nexport default SliderPriceSapling;\n","\nimport React , {useState} from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\n\n// Material-UI selector （var 5）\nimport Typography from '@mui/material/Typography';\nimport Grid from '@mui/material/Grid';\nimport Slider from '@mui/material/Slider';\nimport Input from '@mui/material/Input';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport { styled } from '@mui/styles';\nimport Tooltip, { tooltipClasses } from '@mui/material/Tooltip';\n//\n\n// サイズ指定可能なtool-tipボックス\nconst WideTooltip = styled(({ className, ...props }) => (\n    <Tooltip {...props} classes={{ popper: className }} />\n  ))({\n    [`& .${tooltipClasses.tooltip}`]: {\n      maxWidth: 300,\n    },\n  });\n\n// コンポーネント本体\nfunction SliderRevenue() {\n  // 各種hook設定\n  const dispatch = useDispatch();\n  const revenue = useSelector(state => state.revenue);\n  const setRevenue = (newRevenue) =>{\n    dispatch({type: 'SET_REVENUE', payload: newRevenue});\n  }\n  const [balance, setBalance] = useState([6000,10000]);  // ローカルで利用する収支\n\n  // 材収益調整\n  const textRevenueSlider = `\n    伐出純益を設定。スライダーの右端で売り上げ額を、左端で伐出経費額を設定できます。\n    `;\n  const handleRevenueSlider = (event, newBalance) => {\n    setBalance(newBalance);  // ローカルでバランスを利用\n    const newRevenue = Math.abs(newBalance[0] - newBalance[1])\n    setRevenue(newRevenue);\n  };\n  const handleRevenueInput = (event) => {\n    setRevenue(event.target.value === '' ? NaN : Number(event.target.value));\n    const newBalance = [balance[1] - Number(event.target.value), balance[1]];\n    setBalance(newBalance);\n  };\n  const handleRevenueBlur = () => {\n    if (revenue < 3000) {\n      setRevenue(3000);\n    } else if (revenue > 12000) {\n      setRevenue(12000);\n    }\n  };\n  const rMarks = [\n    { value:    0, label: '0', },\n    { value:  500, label: '', },\n    { value: 1000, label: '1,000', },\n    { value: 2000, label: '', },\n    { value: 3000, label: '', },\n    { value: 4000, label: '', },\n    { value: 5000, label: '5,000', },\n    { value: 6000, label: '', },\n    { value: 7000, label: '', },\n    { value: 8000, label: '', },\n    { value: 9000, label: '', },\n    { value: 10000, label: '10,000円', },\n    { value: 11000, label: '', },\n    { value: 12000, label: '', },\n  ];\n\n  // 出力\n  return (\n    <>\n                {/*伐出純益スライダ*/}\n                <Typography id=\"revenue-input-title\">\n                  伐出純益\n                </Typography>\n                <WideTooltip title={textRevenueSlider} placement=\"top-start\" arrow>\n                  <Grid container id=\"revenue-inputs\" spacing={4} alignItems=\"center\"\n                    sx={{\n                      mb: { xs: 1, sm: 2 },\n                      width: {xs: 180, sm: 180, md: 460,},\n                    }}\n                  >\n                    <Grid item id=\"revenue-slider\" sx={{display: { xs: 'none', sm: 'block'} }} xs>\n                      <Slider\n                        // value={typeof balance === 'number' ? balance : [1000,5000]}\n                        value={balance}\n                        onChange={handleRevenueSlider}\n                        getAriaValueText={(v) => { return ('{$v}円') }}\n                        aria-labelledby=\"revenue-slider\"\n                        step={500}\n                        marks={rMarks}\n                        min={0}\n                        max={12000}\n                        valueLabelDisplay=\"auto\"\n                      />\n                    </Grid>\n                    <Grid item id=\"revenue-number\" >\n                      <Input\n                        sx={{\n                          backgroundColor: \"#ffffff\",\n                          ml: { xs: 4, sm: 2, md: 1, },\n                          width: 115, \n                        }}\n                        value={revenue}\n                        endAdornment={<InputAdornment position=\"end\"><span>円･m<sup>-3</sup></span></InputAdornment>}\n                        margin=\"dense\"\n                        onChange={handleRevenueInput}\n                        onBlur={handleRevenueBlur}\n                        inputProps={{\n                          step: 100,\n                          min: 3000,\n                          max: 12000,\n                          type: 'number',\n                          'aria-labelledby': 'planting-slider',\n                        }}\n                      inputmode=\"numeric\"\n                      enterkeyhint=\"done\"\n                      />\n                    </Grid>\n                  </Grid>\n                </WideTooltip>    </>\n  );\n}\n\nexport default SliderRevenue;\n","import React, {useState} from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\n// Material-UI selector （var 5）\nimport Typography from '@mui/material/Typography';\nimport Grid from '@mui/material/Grid';\nimport Slider from '@mui/material/Slider';\nimport Input from '@mui/material/Input';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport { styled } from '@mui/styles';\nimport Tooltip, { tooltipClasses } from '@mui/material/Tooltip';\n//\n\n// サイズ指定可能なtool-tipボックス\nconst WideTooltip = styled(({ className, ...props }) => (\n  <Tooltip {...props} classes={{ popper: className }} />\n))({\n  [`& .${tooltipClasses.tooltip}`]: {\n    maxWidth: 300,\n  },\n});\n\n// コンポーネント本体\nfunction SliderCostManagement() {\n  // 各種hook設定\n  const dispatch = useDispatch();\n  const costManagement = useSelector(state => state.costManagement);\n  const setCostManagement = (newCostManagement) => {\n    dispatch({ type: 'SET_MANAGEMENT_COST', payload: newCostManagement });\n  }\n  const [balance, setBalance] = useState([100,300]);  // ローカルで利用する収支\n\n\n  // 育林経費調整\n  const textCmSlider = `\n    造林・育林経費のうち、植栽本数に依存しないコストを設定。スライダーの右端で実経費額を、左端で補助金額を設定できます。\n    `;\n  const handleCostManagementSlider = (event, newBalance) => {\n    setBalance(newBalance);  // ローカルでバランスを利用\n    const newCostManagement = Math.abs(newBalance[0] - newBalance[1])\n    setCostManagement(newCostManagement);\n  };\n  const handleCostManagementInput = (event) => {\n    setCostManagement(event.target.value === '' ? NaN : Number(event.target.value));\n    const newBalance = [balance[1] - Number(event.target.value), balance[1]];\n    setBalance(newBalance);\n  };\n  const handleCostManagementBlur = () => {\n    if (costManagement < 0) {\n      setCostManagement(0);\n    } else if (costManagement > 300) {\n      setCostManagement(300);\n    }\n  };\n  const cmMarks = [\n    { value: 0, label: '0', },\n    { value: 50, label: '50', },\n    { value: 100, label: '100', },\n    { value: 150, label: '', },\n    { value: 200, label: '200', },\n    { value: 250, label: '', },\n    { value: 300, label: '300', },\n    { value: 350, label: '', },\n    { value: 400, label: '400万円', },\n  ];\n\n  // 出力\n  return (\n    <>\n      {/*造・育林コストスライダ*/}\n      <Typography id=\"prise-input-title\">\n        育林コスト\n      </Typography>\n      <WideTooltip title={textCmSlider} placement=\"top-start\" arrow>\n        <Grid container id=\"costManagement-inputs\" spacing={4} alignItems=\"center\"\n          sx={{\n            mb: { xs: 3 },\n            width: {xs: 180, sm: 180, md: 460,},\n          }}\n        >\n          <Grid item id=\"costManagement-slider\" sx={{display: { xs: 'none', sm: 'block'} }} xs>\n            <Slider\n              // value={typeof costManagement === 'number' ? costManagement : 200}\n              value={balance}\n              onChange={handleCostManagementSlider}\n              getAriaValueText={(v) => { return ('{$v}万円') }}\n              aria-labelledby=\"priceSapling-slider\"\n              step={10}\n              marks={cmMarks}\n              min={0}\n              max={400}\n              valueLabelDisplay=\"auto\"\n            />\n          </Grid>\n          <Grid item id=\"costManagement-number\" >\n            <Input\n              sx={{\n                backgroundColor: \"#ffffff\",\n                ml: { xs: 4, sm: 2, md: 2 },\n                width: 120,\n              }}\n              value={costManagement}\n              endAdornment={<InputAdornment position=\"end\"><span>万円･ha<sup>-1</sup></span></InputAdornment>}\n              margin=\"dense\"\n              onChange={handleCostManagementInput}\n              onBlur={handleCostManagementBlur}\n              inputProps={{\n                step: 10,\n                min: 0,\n                max: 300,\n                type: 'number',\n                'aria-labelledby': 'costManagement-slider',\n              }}\n              inputmode=\"numeric\"\n              enterkeyhint=\"done\"\n            />\n          </Grid>\n        </Grid>\n      </WideTooltip>\n    </>\n  );\n}\n\nexport default SliderCostManagement;\n","\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\n// Material-UI selector （var 5）\nimport Typography from '@mui/material/Typography';\nimport Grid from '@mui/material/Grid';\nimport Slider from '@mui/material/Slider';\nimport Input from '@mui/material/Input';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport { styled } from '@mui/styles';\nimport Tooltip, { tooltipClasses } from '@mui/material/Tooltip';\n//\n\n// サイズ指定可能なtool-tipボックス\nconst WideTooltip = styled(({ className, ...props }) => (\n  <Tooltip {...props} classes={{ popper: className }} />\n))({\n  [`& .${tooltipClasses.tooltip}`]: {\n    maxWidth: 300,\n  },\n});\n\n// コンポーネント本体\nfunction SliderMAI() {\n  // 各種hook設定\n  const dispatch = useDispatch();\n  const mai = useSelector(state => state.mai);\n  const setMAI = (newMAI) => {\n    dispatch({ type: 'SET_MAI', payload: newMAI });\n  }\n\n  // 平均成長量調整\n  const textMAISlider = `\n    LEVによる収益判断のための平均年成長量を設定。この値が算出されるMAI閾値を上回る場合、LEVがプラスとなる伐期が結果欄に表示されます。\n    `;\n  const handleMAISlider = (event, newMAI) => {\n    setMAI(newMAI);\n  };\n  const handleMAIInput = (event) => {\n    setMAI(event.target.value === '' ? NaN : Number(event.target.value));\n  };\n  const handleMAIBlur = () => {\n    if (mai < 5.0) {\n      setMAI(5.0);\n    } else if (mai > 25.0) {\n      setMAI(25.0);\n    }\n  };\n  const maiMarks = [\n    { value: 5, label: '5', },\n    { value: 10, label: '10', },\n    { value: 15, label: '', },\n    { value: 20, label: '20m3/ha/年', },\n    { value: 25, label: '', },\n  ];\n\n  // 出力\n  return (\n    <>\n      {/*MAIスライダ*/}\n      <Typography id=\"prise-input-title\">\n        年平均成長量（MAI）\n      </Typography>\n      <WideTooltip title={textMAISlider} placement=\"top-start\" arrow>\n        <Grid container id=\"MAI-inputs\" spacing={4} alignItems=\"center\"\n          sx={{\n            mb: { xs: 3 },\n            width: {xs: 180, sm: 180, md: 460,},\n          }}\n        >\n          <Grid item id=\"MAI-slider\" sx={{display: { xs: 'none', sm: 'block'} }} xs>\n            <Slider\n              value={typeof mai === 'number' ? mai : 10}\n              onChange={handleMAISlider}\n              getAriaValueText={(v) => { return ('{$v}m3/ha/y') }}\n              aria-labelledby=\"priceSapling-slider\"\n              step={1}\n              marks={maiMarks}\n              min={5}\n              max={25}\n              valueLabelDisplay=\"auto\"\n            />\n          </Grid>\n          <Grid item id=\"MAI-number\" >\n            <Input\n              sx={{\n                backgroundColor: \"#ffffff\",\n                ml: { xs: 4, sm: 2, md: 2 },\n                width: 120,\n                p: 0\n              }}\n              value={mai}\n              endAdornment={<InputAdornment position=\"end\"><span>m<sup>3</sup>ha<sup>-1</sup>年<sup>-1</sup></span></InputAdornment>}\n              margin=\"dense\"\n              onChange={handleMAIInput}\n              onBlur={handleMAIBlur}\n              inputProps={{\n                step: 1,\n                min: 5,\n                max: 25,\n                type: 'number',\n                'aria-labelledby': 'costMgmt-slider',\n              }}\n              inputmode=\"numeric\"\n              enterkeyhint=\"done\"\n            />\n          </Grid>\n        </Grid>\n      </WideTooltip>\n\n    </>\n  );\n}\n\nexport default SliderMAI;\n","//\n// stage-2 用の 樹種セレクタコンポーネント\n// sp は id に内包されるため、直接的な機能は無いが、\n// id 選択の場合分けに必要\n//\n\n\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\n// Material-UI selector （var 5）\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Select from '@mui/material/Select';\nimport { styled } from '@mui/styles';\nimport Tooltip, { tooltipClasses } from '@mui/material/Tooltip';\n//\n\n// サイズ指定可能なtool-tipボックス\nconst WideTooltip = styled(({ className, ...props }) => (\n  <Tooltip {...props} classes={{ popper: className }} />\n))({\n  [`& .${tooltipClasses.tooltip}`]: {\n    maxWidth: 300,\n  },\n});\n\n// コンポーネント本体\nfunction SelectorSp() {\n  // 各種hook設定\n  const dispatch = useDispatch();\n  const sp = useSelector(state => state.sp);\n  const setSp = (newSp) => {\n    dispatch({ type: 'SET_SP', payload: newSp });\n  }\n\n  //樹種変更\n  const textChangeSP = `\n    密度管理図の対象とする樹種を選択\n    `;\n  const handleChangeSp = (event) => {\n    setSp(event.target.value);\n  };\n\n\n  // 出力\n  return (\n    <>\n      {/*樹種選択*/}\n      <WideTooltip title={textChangeSP} placement=\"right-end\" arrow>\n        <FormControl\n          sx={{\n            margin: { xs: 1 },\n            minWidth: 120,\n            padding: { xs: 1 },\n          }}\n        >\n          <InputLabel id=\"sp-select-label\">樹種</InputLabel>\n          <Select\n            sx={{\n              backgroundColor: \"#ffffff\",\n            }}\n            labelId=\"sp-select-label\"\n            id=\"sp-select\"\n            value={sp}\n            onChange={handleChangeSp}\n          >\n            <MenuItem value={0}>スギ</MenuItem>\n            <MenuItem value={1}>ヒノキ</MenuItem>\n            <MenuItem value={2}>カラマツ</MenuItem>\n            <MenuItem value={3}>アカマツ</MenuItem>\n            <MenuItem value={4}>針葉樹</MenuItem>\n            <MenuItem value={5}>広葉樹</MenuItem>\n          </Select>\n        </FormControl>\n      </WideTooltip>\n    </>\n  );\n}\n\nexport default SelectorSp;\n","//\n// stage-2 用の パラメータIDセレクタコンポーネント\n// このコンポーネントは sp 選択枝が sp で場合分けされる。\n//\n\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\n// Material-UI selector （var 5）\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Select from '@mui/material/Select';\nimport { styled } from '@mui/styles';\nimport Tooltip, { tooltipClasses } from '@mui/material/Tooltip';\n//\n\n// サイズ指定可能なtool-tipボックス\nconst WideTooltip = styled(({ className, ...props }) => (\n  <Tooltip {...props} classes={{ popper: className }} />\n))({\n  [`& .${tooltipClasses.tooltip}`]: {\n    maxWidth: 300,\n  },\n});\n\n// コンポーネント本体\nfunction SelectorID() {\n  // 各種hook設定\n  const dispatch = useDispatch();\n  const id = useSelector(state => state.id);\n  const setID = (newID) => {\n    dispatch({ type: 'SET_ID', payload: newID });\n    dispatch({ type: 'SET_DV'});\n  }\n  const sp = useSelector(state => state.sp);\n\n  // エリア変更\n  const textChangeArea = `\n    密度管理図の対象とする地域を選択\n    `;\n  const handleChangeID = (event) => {\n    setID(event.target.value);\n  };\n\n  // 西園ら (2013) に基づく密度管理図パラメータリスト\n  const parameters = require('./parameters.json');\n  const selectedParameters = parameters.filter(d => d.spID == sp);\n\n  // 出力\n  return (\n    <>\n      {/*エリア選択*/}\n      <WideTooltip title={textChangeArea} placement=\"right-end\" arrow>\n        <FormControl\n          sx={{\n            margin: { xs: 1 },\n            minWidth: 120,\n            padding: { xs: 1 },\n          }}\n        >\n          <InputLabel id=\"area-select-label\">エリア</InputLabel>\n          <Select\n            sx={{\n              backgroundColor: \"#ffffff\",\n            }}\n            labelId=\"area-select-label\"\n            id=\"area-select\"\n            value={id}\n            onChange={handleChangeID}\n          >\n            {selectedParameters.map(v => { return (<MenuItem value={v.ID}>{v.area}</MenuItem>) })}\n          </Select>                </FormControl>\n      </WideTooltip>\n    </>\n  );\n}\n\nexport default SelectorID;","//\n// stage-2 用の 割引率（実質金利）セレクタコンポーネント\n//\n\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\n// Material-UI selector （var 5）\nimport Box from '@mui/material/Box';\nimport InputLabel from '@mui/material/InputLabel';\nimport OutlinedInput from '@mui/material/OutlinedInput';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport { styled } from '@mui/styles';\nimport Tooltip, { tooltipClasses } from '@mui/material/Tooltip';\n//\n\n// サイズ指定可能なtool-tipボックス\nconst WideTooltip = styled(({ className, ...props }) => (\n  <Tooltip {...props} classes={{ popper: className }} />\n))({\n  [`& .${tooltipClasses.tooltip}`]: {\n    maxWidth: 300,\n  },\n});\n\n// コンポーネント本体\nfunction SelectorDR() {\n  // 各種hook設定\n  const dispatch = useDispatch();\n  const discountingRate = useSelector(state => state.discountingRate);\n  const setDiscountingRate = (newDR) => {\n    dispatch({ type: 'SET_DISCOUNTING_RATE', payload: newDR });\n  }\n\n  // 割引率調整\n  const textDRInput = `\n    LEVによる収益判断のための割引率を設定。割引率が0%の場合は、林業純益 ＝ 正味現在価値となります。\n    `;\n  const handleDiscountingRateInput = (event) => {\n    setDiscountingRate(event.target.value === '' ? NaN : Number(event.target.value));\n  };\n  const handleDiscountingRateBlur = () => {\n    if (discountingRate < 0) {\n      setDiscountingRate(0);\n    } else if (discountingRate > 2) {\n      setDiscountingRate(2);\n    }\n  };\n\n\n  // 出力\n  return (\n    <Box sx={{mx:{xs:1, sm: 2},}}>\n      {/*割引率選択*/}\n      <InputLabel htmlFor=\"outlined-adornment-amount\">割引率</InputLabel>\n      <WideTooltip title={textDRInput} placement=\"top\" arrow>\n        <OutlinedInput\n          sx={{\n            backgroundColor: \"#ffffff\",\n            width: 108,\n          }}\n          value={discountingRate}\n          endAdornment={<InputAdornment position=\"end\">%</InputAdornment>}\n          onChange={handleDiscountingRateInput}\n          onBlur={handleDiscountingRateBlur}\n          inputProps={{\n            step: 0.1,\n            min: 0.0,\n            max: 2.0,\n            type: 'number',\n            'aria-labelledby': 'discountingRate',\n          }}\n        inputmode=\"numeric\"\n        enterkeyhint=\"done\"\n        />\n      </WideTooltip>\n    </Box>\n  );\n}\n\nexport default SelectorDR;\n","//\n// stage-2 用の 製材歩留セレクタコンポーネント\n//\n\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\n// Material-UI selector （var 5）\nimport Box from '@mui/material/Box';\nimport InputLabel from '@mui/material/InputLabel';\nimport OutlinedInput from '@mui/material/OutlinedInput';\nimport { styled } from '@mui/styles';\nimport Tooltip, { tooltipClasses } from '@mui/material/Tooltip';\n//\n\n// サイズ指定可能なtool-tipボックス\nconst WideTooltip = styled(({ className, ...props }) => (\n  <Tooltip {...props} classes={{ popper: className }} />\n))({\n  [`& .${tooltipClasses.tooltip}`]: {\n    maxWidth: 300,\n  },\n});\n\n// コンポーネント本体\nfunction SelectorPY() {\n  // 各種hook設定\n  const dispatch = useDispatch();\n  const processYield = useSelector(state => state.processYield);\n  const setProcessYield = (newPY) => {\n    dispatch({ type: 'SET_PROCESS_YIELD', payload: newPY });\n  }\n\n  // 歩留まり調整\n  const textPYInput = `\n    LEVによる収益判断のための丸太生産歩留まりを設定。\n    `;\n  const handleProcessYieldInput = (event) => {\n    setProcessYield(event.target.value === '' ? NaN : Number(event.target.value));\n  };\n  const handleProcessYieldBlur = () => {\n    if (processYield < 0.1) {\n      setProcessYield(0.1);\n    } else if (processYield > 1.0) {\n      setProcessYield(1.0);\n    }\n  };\n\n\n  // 出力\n  return (\n    <Box sx={{mx:{xs:1, sm: 2},}}>\n      {/*製材歩留選択*/}\n      <InputLabel htmlFor=\"outlined-adornment-amount\">歩留</InputLabel>\n      <WideTooltip title={textPYInput} placement=\"top-start\" arrow>\n        <OutlinedInput\n          sx={{\n            backgroundColor: \"#ffffff\",\n            width: 108,\n          }}\n          value={processYield}\n          onChange={handleProcessYieldInput}\n          onBlur={handleProcessYieldBlur}\n          inputProps={{\n            step: 0.1,\n            min: 0.1,\n            max: 1.0,\n            type: 'number',\n            'aria-labelledby': 'processYield',\n          }}\n        inputmode=\"numeric\"\n        enterkeyhint=\"done\"\n        />\n      </WideTooltip>\n    </Box>\n  );\n}\n\nexport default SelectorPY;\n","// 密度管理図概要カード\r\nimport Typography from '@mui/material/Typography';\r\nimport Box from '@mui/system/Box';\r\nimport Card from '@mui/material/Card';\r\nimport CardHeader from '@mui/material/CardHeader';\r\nimport CardContent from '@mui/material/CardContent';\r\n\r\n\r\nconst CalcSDMSummary = (sdm, height, planting) => {\r\n  const outMaxD = sdm.densityHMaxD(height);\r\n  const outMaxV = sdm.volumeMaxD2(outMaxD)\r\n  const outDV = sdm.PH2DV2(height, planting);\r\n  const outRy = outDV.volume / outMaxV;\r\n  return (\r\n    <Card\r\n      id=\"DC-summary\"\r\n      sx={{\r\n        width: 460,\r\n        heigh: 240,\r\n        boxShadow: 3,\r\n      }}\r\n    >\r\n      <CardHeader title=\"密度管理図概要\"\r\n        sx={{\r\n          backgroundColor: '#d4d4d4',\r\n          p: 1,\r\n          ml: 0,\r\n          //height: { xs: 1 },\r\n        }}\r\n      />\r\n      <CardContent\r\n        sx={{\r\n          m: 0,\r\n        }}\r\n      >\r\n        <Typography l={0.8} id=\"result DC\" component=\"div\">\r\n          <Box textAlign=\"left\" m={0}>\r\n            ・樹高{height}m時の最多密度:\r\n            <font size=\"+1\"> {Math.round(outMaxD)} </font> 本ha<sup>-1</sup>\r\n          </Box>\r\n          <Box textAlign=\"left\" m={0}>\r\n            ・樹高{height}m時の最多林分材積:\r\n            <font size=\"+1\"> {Math.round(outMaxV)} </font> m<sup>3</sup>ha<sup>-1</sup>\r\n          </Box>\r\n          <Box textAlign=\"left\" m={0}>\r\n            ・{planting}本植栽で樹高{height}mの材積:\r\n            <font size=\"+1\"> {Math.round(outDV.volume)} </font> m<sup>3</sup>ha<sup>-1</sup>\r\n          </Box>\r\n          <Box textAlign=\"left\" m={0}>\r\n            ・{planting}本植栽で樹高{height}mの個体密度:\r\n            <font size=\"+1\"> {Math.round(outDV.density)} </font> 本 ha<sup>-1</sup>\r\n          </Box>\r\n          <Box textAlign=\"left\" m={0}>\r\n            ・樹高{height}m時の収量比数:\r\n            <font size=\"+1\" color={outRy > 0.95 ? \"red\" : \"black\"}> {Math.round(outRy * 100) / 100} </font>\r\n          </Box>\r\n        </Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default CalcSDMSummary;\r\n","// 密度管理図関連の計算式クラス\r\n// 基本パラメータは、parameters.json で管理\r\nimport brentsMethod from 'brents-method';\r\nimport minimize from 'minimize-golden-section-1d';\r\n//\r\nconst parameters = require('./parameters.json');\r\n\r\nclass SDMDiagram {\r\n  constructor(id) {\r\n    // まずパラメータを取得可能かどうかチェック。\r\n    this.id = id != null ? id : 0;\r\n\r\n    let p = parameters[id];\r\n    let k1 = p.b4 / (p.b2 - p.b4);\r\n    const setK2 = (k1) => { return p.Rf / p.b3 * (p.Rf / (1 - p.Rf) * p.b1 / p.b3) ** k1 };\r\n    const setK5 = (k1) => { return k1 * p.Rf / p.b3 * (p.Rf / (1 - p.Rf) * p.b1 / p.b3) ** k1 * (p.b2 / p.b4) ** (k1 + 1) };\r\n    // これ以降、パラメータ代入\r\n    this.p = p;\r\n    this.k1 = k1;\r\n    this.k2 = setK2(k1);\r\n    this.k5 = setK5(k1);\r\n    this.state = {\r\n      p: p,\r\n      k1: k1,\r\n      k2: this.k2,\r\n      k5: this.k5,\r\n    };\r\n  };\r\n\r\n  // パラメータ再設定\r\n  setParms = async (inputID) => {\r\n    let localID = inputID == null ? this.id : inputID;\r\n    let lp = parameters[localID];\r\n    let lk1 = lp.b4 / (lp.b2 - lp.b4);\r\n\r\n    const setK2l = (k1) => { return lp.Rf / lp.b3 * (lp.Rf / (1 - lp.Rf) * lp.b1 / lp.b3) ** k1 };\r\n    const setK5l = (k1) => { return k1 * lp.Rf / lp.b3 * (lp.Rf / (1 - lp.Rf) * lp.b1 / lp.b3) ** k1 * (lp.b2 / lp.b4) ** (k1 + 1) };\r\n\r\n    this.id = localID;\r\n    this.p = lp;\r\n    this.k1 = lk1;\r\n    this.k2 = setK2l(lk1);\r\n    this.k5 = setK5l(lk1);\r\n    this.state = {\r\n      p: lp,\r\n      k1: lk1,\r\n      k2: this.k2,\r\n      k5: this.k5,\r\n    };\r\n\r\n    return 0;\r\n  }\r\n\r\n  // 最大到達密度（植栽本数から自然枯死のみで最多密度に達したときの個体数）\r\n  maximumDensity(planting) {\r\n    return (this.k1 + 1) / this.k1 * planting;\r\n  }\r\n\r\n  // 自然枯死曲線（個体材積版。初期密度、平均個体材積から個体密度推定）\r\n  naturalThinning1(planting, volumeI) {\r\n    return (1 / planting - volumeI / (this.k5 * planting ** (this.k1 + 1))) ** (-1)\r\n  };\r\n\r\n  // 自然枯死曲線（林分材積版。初期密度、林分材積から個体密度推定）\r\n  naturalThinning2(planting, volumeA) {\r\n    return (planting + volumeA / (this.k5 * planting ** (this.k1)))\r\n  };\r\n\r\n  // 最多密度曲線（個体材積版。 最多密度となる場合の平均個体材積を推定）\r\n  volumeMaxD1(density) {\r\n    return this.k2 * density ** this.k1;\r\n  };\r\n\r\n  // 最多密度曲線（林分材積版。 最多密度となる場合の林分材積を推定）\r\n  volumeMaxD2(density) {\r\n    return this.k2 * density ** (this.k1 + 1);\r\n  };\r\n\r\n  // 最多密度（個体材積版。与えられた樹高時の最多密度）\r\n  densityHMaxD(height) {\r\n    return (1 - this.p.Rf) / this.p.Rf * this.p.b3 / this.p.b1 * height ** (this.p.b4 - this.p.b2);\r\n  }\r\n\r\n  // 最多密度（林分材積版。与えられた林分材積に相当する個体密度（volumeMaxD2 の逆数））\r\n  densityV2MaxD(volumeA) {\r\n    return (volumeA / (this.k2)) ** (1 / (this.k1 + 1));\r\n  }\r\n\r\n  // 等平均樹高曲線（個体材積版。樹高・立木密度から平均個体材積を推定）\r\n  volumeHD1(height, density) {\r\n    const dMax = this.densityHMaxD(height);\r\n    let density2 = Math.min(density, dMax);\r\n    return (density2 * this.p.b1 * height ** this.p.b2 + this.p.b3 * height ** this.p.b4) ** (-1);\r\n  };\r\n\r\n  // 等平均樹高曲線（林分材積版。樹高・立木密度から林分材積を推定）\r\n  volumeHD2(height, density) {\r\n    // 最多密度以上にならないように個体密度を調整\r\n    const dMax = this.densityHMaxD(height);\r\n    let density2 = Math.min(density, dMax);\r\n    return (this.p.b1 * height ** this.p.b2 + (1 / density2) * this.p.b3 * height ** this.p.b4) ** (-1);\r\n  };\r\n\r\n  // 樹高・林分材積から個体密度推定（等平均樹高曲線・個体材積版の逆関数）\r\n  densityHV1(height, volumeI) {\r\n    return ((1 / volumeI - this.p.b3 * height ** this.p.b4) * 1 / (this.p.b1 * height ** this.p.b2));\r\n  }\r\n\r\n  // 樹高・林分材積から個体密度推定（等平均樹高曲線・林分材積版の逆関数）\r\n  densityHV2(height, volumeA) {\r\n    return ((volumeA * this.p.b3 * height ** this.p.b4) / (1 - volumeA * this.p.b1 * height ** this.p.b2));\r\n  }\r\n\r\n  // 目標樹高材積（林分材積版。初期密度と目標樹高から林分材積、個体密度を推定）\r\n  PH2DV2(height, planting) {\r\n    // ブレンツ法で目標樹高時の個体密度を求解\r\n    let resultD = brentsMethod(\r\n      x => this.volumeHD2(height, x) - (x - planting) * (this.k5 * planting ** (this.k1)),\r\n      0,\r\n      planting,\r\n      { errorTolerance: 1e-4, maxIterations: 100 },\r\n    );\r\n    let resultV = this.volumeHD2(height, resultD);\r\n    const altDensity = this.densityHMaxD(height);\r\n    const altVolume = this.volumeMaxD2(altDensity);\r\n    const dMax = this.maximumDensity(planting);\r\n\r\n    // 個体数が最多密度より少なくなっていた場合、最多密度とする。\r\n    if (resultD < dMax) {\r\n      resultD = altDensity;\r\n      resultV = altVolume;\r\n    };\r\n\r\n    // 出力\r\n    return { 'density': resultD, 'volume': resultV };\r\n  };\r\n\r\n  // 植栽本数推定（林分材積版。目標樹高到達時の個体密度から植栽本数を推定（間伐影響評価用））\r\n  DV2Planting2(density, volumeA) {\r\n    // ブレンツ法で目標樹高時の個体密度を求解\r\n    return brentsMethod(\r\n      x => density - (x + volumeA / (this.k5 * x ** (this.k1))),\r\n      0,\r\n      density,\r\n      { errorTolerance: 1e-2, maxIterations: 100 },\r\n    );\r\n  }\r\n\r\n  // 樹高、材積から植栽本数を推定（林分材積版。）\r\n  HV2Planting2(height, volumeA) {\r\n    // ブレンツ法で目標樹高時の個体密度を求解\r\n    return brentsMethod(\r\n      x => x + volumeA / (this.k5 * x ** (this.k1)) - (this.p.b3 * height ** this.p.b4) / (1 / volumeA - this.p.b1 * height ** this.p.b2),\r\n      0,\r\n      5000,  // caution!! 植栽本数の上限を設定しています。\r\n      { errorTolerance: 1e-2, maxIterations: 100 },\r\n    );\r\n  }\r\n\r\n  // 与えられた樹高における最適植栽本数（＝収益最大化）\r\n  OptimalPlanting(height, revenue, priceSapling, costManagement) {\r\n    const func = (planting) => {\r\n      const volumeHat = this.PH2DV2(height, planting).volume;\r\n      return (-(volumeHat * revenue - (costManagement + planting * priceSapling)));\r\n    };\r\n\r\n    // 数値最適化\r\n    let solution = minimize(func,  {tolerance: 1e-3, lowerBound: 0, upperBound: 5000});\r\n    return (solution);\r\n  }\r\n};\r\n\r\nexport default SDMDiagram;","/*\r\n// 密度管理図自体の要望がどうしても生じるので、作図できるようにする。\r\n*/\r\nimport React from 'react';\r\n// import _ from 'underscore';\r\nimport SDMDiagram from './sdm-core';\r\n//\r\n//\r\nimport { scaleLog, scaleOrdinal } from '@visx/scale';\r\nimport { AxisLeft, AxisBottom } from '@visx/axis';\r\nimport { GridRows, GridColumns } from '@visx/grid';\r\nimport { Group } from '@visx/group';\r\nimport { curveBasis, curveLinear, curveNatural, curveCardinal } from '@visx/curve';\r\nimport { LinePath } from '@visx/shape';\r\nimport { GlyphStar } from '@visx/glyph';\r\nimport { Text } from '@visx/text';\r\nimport { LegendOrdinal } from '@visx/legend';\r\n//\r\nimport { Card, CardContent } from '@mui/material';\r\nimport CardHeader from '@mui/material/CardHeader';\r\n\r\nfunction DrawSDMDiagram(id, plantingInput, dv) {\r\n  // x軸範囲設定\r\n  const xTop = (plantingInput <= 5000 ? 5000 : 12000);\r\n  const xBottom = 100;\r\n  const xTickValue = [500, 1000, 2000, 3000, 4000, 5000];\r\n  const xTickValueEx = [500, 1000, 5000, 10000];\r\n\r\n  // 植栽本数配列\r\n  const planting = new Array(24).fill(null).map((_, i) => (i + 1) * 500);\r\n  // 樹高配列\r\n  const height = new Array(41).fill(null).map((_, i) => (i + 2));\r\n  // 個体密度配列\r\n  const density = new Array(41).fill(null).map((_, i) => (xBottom + i * 200));\r\n  // 収量比数配列\r\n  const ry = [1, 0.95, 0.9, 0.8, 0.7, 0.6, 0.5];\r\n\r\n  // 密度管理コアオブジェクト作成\r\n  let localDC = new SDMDiagram(id);\r\n\r\n  // y軸範囲設定\r\n  const yTop = Math.ceil(localDC.volumeMaxD2(localDC.densityHMaxD(Math.max(...height))) / 1000) * 1000;  // スプレッド構文 (...) の利用で最大値取得\r\n  const bottomTmp = localDC.volumeHD2(10, xBottom);\r\n  const yBottom = bottomTmp > 10 ? Math.floor(bottomTmp / 10) * 10 : 10;\r\n  const yLabel = '林分材積（ m^3 ／ ha）';\r\n\r\n  // scales (対数軸設定)\r\n  const densityScale = scaleLog({\r\n    domain: [xBottom, xTop],\r\n    clamp: true,\r\n  });\r\n  const volumeScale = scaleLog({\r\n    domain: [yBottom, yTop],\r\n    clamp: true,\r\n  });\r\n  // graph margin\r\n  const defaultMargin = { top: 30, right: 30, bottom: 70, left: 70 };\r\n\r\n  // 自然枯死曲線描画用データ\r\n  const nThinning = planting\r\n    .map(\r\n      (x) => (height\r\n        .flatMap(\r\n          (y) => {\r\n            const dv = localDC.PH2DV2(y, x);\r\n            return (\r\n              dv.density >= xBottom && dv.density <= xTop && dv.volume >= yBottom && dv.volume <= yTop\r\n                ? dv\r\n                : []\r\n            )\r\n          }\r\n        )\r\n      )\r\n    );\r\n\r\n  // 等樹高曲線データ\r\n  let evenHeight = height.filter(h => h % 5 === 0)\r\n    .map(\r\n      (h) => {\r\n        const densityPlus = density.concat([localDC.densityHMaxD(h)]);\r\n        return (\r\n          densityPlus.flatMap(\r\n            (d) => {\r\n              const MaxD = localDC.densityHMaxD(h);\r\n              const vol = localDC.volumeHD2(h, d)\r\n              return (\r\n                d <= MaxD && d <= xTop && d >= xBottom && vol >= yBottom && vol <= yTop\r\n                  ? { density: d, volume: vol }\r\n                  : []\r\n              )\r\n            }\r\n          )\r\n        )\r\n      }\r\n    );\r\n  // 等樹高曲線ラベルデータ\r\n  const labelEvenHeight = evenHeight.filter(d => d.length > 0)\r\n    .map((d, i) => {\r\n      return (\r\n        { height: (i + 1) * 5, density: d[0].density, volume: d[0].volume, }\r\n      )\r\n    });\r\n\r\n  // 収量比数線データ\r\n  // height における最多密度とその際の林分材積\r\n  const dvMaxD = height.map((h) => {\r\n    const outDensity = localDC.densityHMaxD(h);\r\n    return ({ density: outDensity, volume: localDC.volumeMaxD2(outDensity) });\r\n  });\r\n  // height における各収量比数時の林分材積と個体密度（flatMapで枠外データ除外）\r\n  const ryTarget = ry.map(r => (\r\n    dvMaxD.flatMap((dv, i) => {\r\n      const vol = r * dv.volume;\r\n      const den = localDC.densityHV2((i + 2), vol);\r\n      return (\r\n        vol <= yTop && vol > yBottom && den > xBottom && den <= xTop\r\n          ? { density: den, volume: vol }\r\n          : []\r\n      );\r\n    })\r\n  ));\r\n  // 収量比数線ラベルデータ\r\n  const labelRy = ryTarget.filter(d => d.length > 0)\r\n    .map((d, i) => {\r\n      return (\r\n        { ry: ry[i], density: d[d.length - 1].density, volume: d[d.length - 1].volume, }\r\n      )\r\n    });\r\n\r\n  // 凡例データ\r\n  const legendScale = scaleOrdinal({\r\n    domain: [\"自然枯死線\", \"等収量比数線\", \"等平均樹高線\"],\r\n    range: [\"#2A2\", \"#A33\", \"#22A\"],\r\n  });\r\n\r\n\r\n\r\n  // グラフ描画設定\r\n  const svgWidth = 640;\r\n  const svgHeight = 480;\r\n  const background = '#f8f8f8'; // うっすら灰色\r\n  const margin = defaultMargin;\r\n  const xMax = svgWidth - margin.left - margin.right;\r\n  const yMax = svgHeight - margin.top - margin.bottom;\r\n  densityScale.range([0, xMax]);\r\n  volumeScale.range([yMax, 0]);\r\n\r\n  return (\r\n    nThinning != null ?\r\n      <Card\r\n        id=\"LEV-summary\"\r\n        sx={{\r\n          width: 660,\r\n          height: 500,\r\n          boxShadow: 3,\r\n        }}\r\n      >\r\n        <CardContent\r\n          sx={{\r\n            p: 1,\r\n          }}\r\n        >\r\n          <svg width={svgWidth} height={svgHeight}>\r\n            {/* グラフ描画ボックス */}\r\n            <rect x={0} y={0} width={svgWidth} height={svgHeight} fill={background} rx={14} />\r\n            <Group left={margin.left} top={margin.top}>\r\n\r\n              {/* 軸描画 */}\r\n              <GridRows scale={volumeScale} width={xMax} height={yMax} stroke=\"#e0e0e0\" />\r\n              <GridColumns scale={densityScale} width={xMax} height={yMax} stroke=\"#e0e0e0\" />\r\n              <line x1={xMax} x2={xMax} y1={0} y2={yMax} stroke=\"#e0e0e0\" />\r\n              <AxisBottom\r\n                top={yMax}\r\n                scale={densityScale}\r\n                tickValues={plantingInput <= 5000 ? xTickValue : xTickValueEx}\r\n                tickFormat={(v) => { return `${v}` }}\r\n                label={\"個体密度 (本／ha)\"}\r\n                labelProps={{ fontSize: 16, textAnchor: \"middle\", }}\r\n              />\r\n              <AxisLeft\r\n                scale={volumeScale}\r\n                numTicks={5}\r\n                tickValues={[20, 50, 100, 200, 500, 1000, 2000]}\r\n                tickFormat={(v) => { return `${v}` }}\r\n                label={`${yLabel}`}\r\n                labelProps={{ fontSize: 16, textAnchor: \"middle\", }}\r\n              />\r\n\r\n              {/* 自然枯死曲線描画 */}\r\n              {nThinning.map((data, index) => {\r\n                return (\r\n                  <LinePath\r\n                    data={data}\r\n                    curve={curveBasis}\r\n                    x={(d) => densityScale(d.density) ?? 0}\r\n                    y={(d) => volumeScale(d.volume) ?? 0}\r\n                    stroke=\"#2A2\"\r\n                    strokeWidth={1.2}\r\n                    strokeOpacity={0.8}\r\n                  />\r\n                )\r\n              })}\r\n\r\n              {/* 等樹高曲線描画 */}\r\n              {evenHeight.map((data, index) => {\r\n                return (\r\n                  <LinePath\r\n                    data={data}\r\n                    curve={curveCardinal}\r\n                    x={(d) => densityScale(d.density) ?? 0}\r\n                    y={(d) => volumeScale(d.volume) ?? 0}\r\n                    stroke=\"#22A\"\r\n                    strokeWidth={1}\r\n                    strokeOpacity={0.8}\r\n                  />\r\n                )\r\n              })}\r\n              {/* 等樹高曲線ラベル */}\r\n              {labelEvenHeight.filter(d => d.height % 10 === 0)\r\n                .map((data) => {\r\n                  return (\r\n                    <Text\r\n                      x={densityScale(data.density * 1.1)}\r\n                      y={volumeScale(data.volume * 1.1)}\r\n                      fill=\"#22A\"\r\n                      verticalAnchor=\"start\"\r\n                      fontSize=\"0.8em\"\r\n                    >\r\n                      {`${data.height}m`}\r\n                    </Text>\r\n                  );\r\n                })}\r\n\r\n              {/* 収量比数線描画 */}\r\n              {ryTarget.map((data, index) => {\r\n                return (\r\n                  index === 1 ?\r\n                    /* Ry =0.95 は破線にする */\r\n                    <LinePath\r\n                      data={data}\r\n                      curve={curveNatural}\r\n                      x={(d) => densityScale(d.density) ?? 0}\r\n                      y={(d) => volumeScale(d.volume) ?? 0}\r\n                      stroke=\"#A33\"\r\n                      strokeWidth={1}\r\n                      strokeDasharray={[9, 5]}  // 破線の設定\r\n                      strokeOpacity={0.8}\r\n                    />\r\n                    /* それ以外は実線に */\r\n                    : <LinePath\r\n                      data={data}\r\n                      curve={curveNatural}\r\n                      x={(d) => densityScale(d.density) ?? 0}\r\n                      y={(d) => volumeScale(d.volume) ?? 0}\r\n                      stroke=\"#A33\"\r\n                      strokeWidth={1}\r\n                      strokeOpacity={0.8}\r\n                    />\r\n                )\r\n              })}\r\n              {/* 収量比数線ラベル */}\r\n              {labelRy.filter(d => (d.ry * 10 + 1) % 2 === 0)\r\n                .map((data) => {\r\n                  return (\r\n                    <Text\r\n                      x={densityScale(data.density)}\r\n                      y={volumeScale(data.volume)}\r\n                      fill=\"#A33\"\r\n                      textAnchor=\"middle\"\r\n                      horizontalAnchor=\"end\"\r\n                      fontSize=\"0.8em\"\r\n                    >\r\n                      {`Ry=${data.ry}`}\r\n                    </Text>\r\n                  );\r\n                })}\r\n            </Group>\r\n            <Group left={margin.left} top={margin.top}>\r\n              <GlyphStar\r\n                left={densityScale(dv.density) ?? 0}\r\n                top={volumeScale(dv.volume) ?? 0}\r\n                size={110}\r\n                fill=\"#FFA\"\r\n                stroke=\"#AA3\"\r\n                strokeWidth={2}\r\n              />\r\n            </Group>\r\n\r\n          </svg>\r\n          {/* 凡例 */}\r\n          <Card\r\n            variant=\"outlined\"\r\n            sx={{\r\n              width: 140,\r\n              height: 60,\r\n              position: 'relative',\r\n              top: -475,\r\n              left: 510,\r\n            }}\r\n          >\r\n            <CardContent\r\n              sx={{\r\n                fontSize: 12,\r\n                align: \"center\",\r\n                lineHeight: 1.5,\r\n                ml: 1,\r\n                mr: 1,\r\n                mt: 0,\r\n                p: 0,\r\n              }}\r\n            >\r\n              <LegendOrdinal\r\n                scale={legendScale}\r\n                direction=\"column\"\r\n                itemDirection=\"row\"\r\n                shape=\"line\"\r\n                labelMargin=\"0 15px 0 0\"\r\n              />\r\n            </CardContent>\r\n          </Card>\r\n        </CardContent>\r\n      </Card>\r\n      : \"\"\r\n  );\r\n};\r\n\r\nexport default DrawSDMDiagram;\r\n\r\n","// LEV概要カード\r\nimport Typography from '@mui/material/Typography';\r\nimport Box from '@mui/system/Box';\r\nimport Card from '@mui/material/Card';\r\nimport CardHeader from '@mui/material/CardHeader';\r\nimport CardContent from '@mui/material/CardContent';\r\n//\r\n\r\n// LEV計算\r\nconst CalcLEVSummary = (sdm, lev, optP, optV, mai, priceSapling, costMgmt) => {\r\n  const thresholdYear = lev.threshold(optV);\r\n  const thresholdMAI = isNaN(thresholdYear) ? NaN : optV / thresholdYear;\r\n  const revenueForestry = lev.fc(optV) * 1e-4 - (optP * priceSapling * 1e-4 + costMgmt);\r\n  const npvOutput = lev.npv(optV, optV / mai);\r\n  const levOutput = lev.lev(optV, optV / mai);\r\n\r\n  // IRR計算\r\n  // データは、［年, 収支］のネスト配列\r\n  // 厳密には、施業コストは発生年毎に記載すべきだが、初年度に全てのコストが発生するとする。\r\n  const balance = [[0, -(optP * priceSapling * 1e-4 + costMgmt)],[Math.ceil(optV / mai), lev.fc(optV) * 1e-4]];\r\n  const irrOutput = lev.irr(balance);\r\n\r\n  return (\r\n    <Card\r\n      id=\"LEV-summary\"\r\n      sx={{\r\n        width: 560,\r\n        boxShadow: 3,\r\n      }}\r\n    >\r\n      <CardContent\r\n        sx={{\r\n          m: 1,\r\n        }}\r\n      >\r\n        <Typography l={1} component=\"div\">\r\n          <Box textAlign=\"left\" m={0.5}>\r\n            ・林業純益:\r\n            <font size=\"+1\"> {Math.round(revenueForestry)} </font> 万円\r\n          </Box>\r\n          <Box textAlign=\"left\" m={0.5}>\r\n            ・LEVがプラスになる平均年成長量 (MAI):\r\n            <font size=\"+1\"> {Math.ceil(thresholdMAI)} </font> m<sup>3</sup>ha<sup>-1</sup>年<sup>-1</sup> 以上\r\n          </Box>\r\n          {/*\r\n            mai > thresholdMAI ? */}\r\n              <>\r\n                <Box textAlign=\"left\" m={0.5}>\r\n                  ・MAIが {mai}m<sup>3</sup>ha<sup>-1</sup>年<sup>-1</sup>の時の伐期:\r\n                  <font size=\"+1\"> {Math.ceil(optV / mai)} </font> 年\r\n                </Box>\r\n                <Box textAlign=\"left\" m={0.5}>\r\n                  ・内部収益率（IRR）:\r\n                  <font size=\"+1\"> {Math.round(irrOutput * 10000)/100} </font> %\r\n                </Box>\r\n                <Box textAlign=\"left\" m={0.5}>\r\n                  ・正味現在価値（NPV）:\r\n                  <font size=\"+1\"> {Math.round(npvOutput / 10000)} </font> 万円\r\n                </Box>\r\n                <Box textAlign=\"left\" m={0.5}>\r\n                  ・土地希望価値（LEV）:\r\n                  <font size=\"+1\"> {Math.round(levOutput / 10000)} </font> 万円\r\n                </Box>\r\n              </>\r\n            {/*  : \"\"\r\n          */}\r\n        </Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default CalcLEVSummary;\r\n","/*\r\n// 目的樹高設定時に収支最大となる植栽本数を求めるようにする\r\n*/\r\nimport React from 'react';\r\n//\r\nimport { scaleLinear, scaleOrdinal } from '@visx/scale';\r\nimport { AxisLeft, AxisBottom } from '@visx/axis';\r\nimport { GridRows, GridColumns } from '@visx/grid';\r\nimport { Group } from '@visx/group';\r\nimport { curveBasis } from '@visx/curve';\r\nimport { LinePath } from '@visx/shape';\r\nimport { Annotation, Label, Connector, LineSubject } from '@visx/annotation';\r\nimport { LegendOrdinal } from '@visx/legend';\r\n//\r\nimport CardHeader from '@mui/material/CardHeader';\r\nimport { Card, CardContent } from '@mui/material';\r\nimport { positions } from '@mui/system';\r\n//\r\n\r\nfunction OptimalPlanting(sdm, lev, height, priceSapling, costManagement, optP, optV) {\r\n  // x軸範囲設定\r\n  const xTop = 6000;\r\n  const xBottom = 500;\r\n\r\n  // 植栽本数配列\r\n  const planting = new Array(56).fill(null).map((_, i) => (i) * 100 + 500);\r\n\r\n  // 純収益（材単価 - 立米あたりの伐出コスト。いずれ スライダーに）\r\n  // const revenueNet = 5000;\r\n  // 苗木価格 （これもいずれスライダーに）\r\n  // const priceSapling = 100;\r\n  // 造・育林コスト（これは固定値か？）\r\n  // const costManagement = 2e6;\r\n\r\n  // 植栽本数・目標樹高から、材積を計算\r\n  const volume = planting.flatMap(p => (sdm.PH2DV2(height, p).volume));\r\n\r\n  // 主線描画データ作成\r\n  const balanceData = planting.map((p, i) => ({\r\n    planting: p,\r\n    cost: p * priceSapling / 10000 + costManagement,\r\n    revenue: Math.round(lev.fc(volume[i]) / 1000) / 10,\r\n  }));\r\n  // 最適植栽本数描画データ作成\r\n  const optPlantingData = [\r\n    { planting: optP, back: 0, balance: optP * priceSapling / 10000 + costManagement },\r\n    { planting: optP, back: 500, balance: Math.round(lev.fc(optV) / 1000) / 10 },\r\n  ];\r\n  // 収益最大値\r\n  const revenueMax = balanceData[55].revenue;\r\n\r\n  // y軸範囲設定\r\n  const yTop = revenueMax < 500 ? 500 : revenueMax ;\r\n  const yBottom = 0;\r\n\r\n  // scales\r\n  const plantingScale = scaleLinear({\r\n    domain: [xBottom, xTop],\r\n    clamp: true,\r\n  });\r\n  const balanceScale = scaleLinear({\r\n    domain: [yBottom, yTop],\r\n    clamp: true,\r\n  });\r\n  const legendScale = scaleOrdinal({\r\n    domain: [\"伐出純益\", \"植栽・育林コスト\"],\r\n    range: [\"#282\", \"#A22\"],\r\n  });\r\n  // graph margin\r\n  const defaultMargin = { top: 30, right: 30, bottom: 70, left: 70 };\r\n\r\n  // グラフ描画設定\r\n  const svgWidth = 640;\r\n  const svgHeight = 480;\r\n  const background = '#f8f8f8'; // うっすら灰色\r\n  const margin = defaultMargin;\r\n  const xMax = svgWidth - margin.left - margin.right;\r\n  const yMax = svgHeight - margin.top - margin.bottom;\r\n  plantingScale.range([0, xMax]);\r\n  balanceScale.range([yMax, 0]);\r\n\r\n  return (\r\n    <Card\r\n      id=\"LEV-summary\"\r\n      sx={{\r\n        width: 660,\r\n        height: 500,\r\n        boxShadow: 3,\r\n      }}\r\n    >\r\n      <CardContent\r\n        sx={{\r\n          m: 0,\r\n          p: 1,\r\n        }}\r\n      >\r\n        <svg width={svgWidth} height={svgHeight}>\r\n          {/* グラフ描画ボックス */}\r\n\r\n          <rect x={0} y={0} width={svgWidth} height={svgHeight} fill={background} rx={14} />\r\n          <Group left={margin.left} top={margin.top}>\r\n            {/* 軸描画 */}\r\n            <GridRows scale={balanceScale} width={xMax} height={yMax} stroke=\"#e0e0e0\" />\r\n            <GridColumns scale={plantingScale} width={xMax} height={yMax} stroke=\"#e0e0e0\" />\r\n            <line x1={xMax} x2={xMax} y1={0} y2={yMax} stroke=\"#e0e0e0\" />\r\n            <AxisBottom\r\n              top={yMax}\r\n              scale={plantingScale}\r\n              label={\"植栽本数（本／ha）\"}\r\n              labelProps={{ fontSize: 16, textAnchor: \"middle\", }}\r\n            />\r\n            <AxisLeft\r\n              scale={balanceScale}\r\n              numTicks={5}\r\n              label={\"金額（万円）\"}\r\n              labelProps={{ fontSize: 16, textAnchor: \"middle\", }}\r\n            />\r\n            {/* 材収益 */}\r\n            <LinePath\r\n              data={balanceData}\r\n              curve={curveBasis}\r\n              x={(d) => plantingScale(d.planting) ?? 0}\r\n              y={(d) => balanceScale(d.revenue) ?? 0}\r\n              stroke=\"#282\"\r\n              strokeWidth={1.5}\r\n              strokeOpacity={0.8}\r\n            />\r\n            {/* 苗木コスト */}\r\n            <LinePath\r\n              data={balanceData}\r\n              curve={curveBasis}\r\n              x={(d) => plantingScale(d.planting) ?? 0}\r\n              y={(d) => balanceScale(d.cost) ?? 0}\r\n              stroke=\"#A02020\"\r\n              strokeWidth={1.5}\r\n              strokeOpacity={1}\r\n            />\r\n            {/* 最適植栽本数ライン */}\r\n            <LinePath\r\n              data={optPlantingData}\r\n              curve={curveBasis}\r\n              x={(d) => plantingScale(d.planting) ?? 0}\r\n              y={(d) => balanceScale(d.balance) ?? 0}\r\n              stroke={optPlantingData[0].balance >= optPlantingData[1].balance ? \"\" : \"#FA2\"}\r\n              strokeWidth={4}\r\n              strokeOpacity={1}\r\n            />\r\n            {/* 注釈-収益 */}\r\n            {optPlantingData[1].balance > optPlantingData[0].balance\r\n              ?\r\n              <Annotation\r\n                x={plantingScale(optPlantingData[1].planting) ?? 0}\r\n                y={balanceScale(optPlantingData[1].balance) ?? 0}\r\n                dx={60}\r\n                dy={balanceScale(optPlantingData[1].balance) - 60 > 0 ? -30 : 80 - balanceScale(optPlantingData[1].balance)}\r\n              >\r\n                <Connector stroke={\"#ff7e67\"} type={\"elbow\"} />\r\n                <Label\r\n                  backgroundFill=\"white\"\r\n                  showAnchorLine={\"true\"}\r\n                  anchorLineStroke={\"#228b22\"}\r\n                  backgroundProps={{ stroke: \"#ecf4f3\" }}\r\n                  fontColor={\"#2f4f4f\"}\r\n                  horizontalAnchor={\"start\"}\r\n                  verticalAnchor={plantingScale(optP) + 165 > 0 ? \"middle\" : \"top\"}\r\n                  title={\"収益\"}\r\n                  titleFontSize={12}\r\n                  titleFontWeight={800}\r\n                  titleProps={{ textAnchor: \"middle\" }}\r\n                  subtitle={\r\n                    Math.round(optPlantingData[1].balance) + \" 万円  \"\r\n                    + \"(\" + Math.round(optV) + \" m3)\"\r\n                  }\r\n                  subtitleFontSize={16}\r\n                  subtitleDy={2}\r\n                  subtitleProps={{ textAnchor: \"middle\" }}\r\n                  Maxwidth={120}\r\n                />\r\n              </Annotation>\r\n              : \"\"\r\n            }\r\n            {/* 注釈-造林コスト */}\r\n            <Annotation\r\n              x={plantingScale(optPlantingData[0].planting) ?? 0}\r\n              y={balanceScale(optPlantingData[0].balance) ?? 0}\r\n              dx={plantingScale(optP) - 165 > 0 ? -60 : 60}\r\n              dy={balanceScale(optPlantingData[0].balance) + 80 < 340 ? 30 : 260 - balanceScale(optPlantingData[0].balance)}\r\n            >\r\n              <Connector stroke={\"#ff7e67\"} type={\"elbow\"} />\r\n              <Label\r\n                backgroundFill=\"white\"\r\n                showAnchorLine={\"true\"}\r\n                anchorLineStroke={\"#dc143c\"}\r\n                backgroundProps={{ stroke: \"#ecf4f3\" }}\r\n                fontColor={\"#800000\"}\r\n                horizontalAnchor={plantingScale(optP) - 165 > 0 ? \"end\" : \"start\"}\r\n                verticalAnchor={\"middle\"}\r\n                title={\"造・育林コスト\"}\r\n                titleFontSize={12}\r\n                titleFontWeight={800}\r\n                titleProps={{ textAnchor: \"middle\" }}\r\n                subtitle={Math.round(optPlantingData[0].balance) + \"万円\"}\r\n                subtitleFontSize={16}\r\n                subtitleDy={2}\r\n                subtitleProps={{ textAnchor: \"middle\" }}\r\n                width={100}\r\n              />\r\n            </Annotation>\r\n            {/* 注釈-最適植栽数 */}\r\n            <Annotation\r\n              x={plantingScale(optP) ?? 0}\r\n              y={balanceScale(0) ?? 0}\r\n              dx={60}\r\n              dy={-40}\r\n            >\r\n              <Connector stroke={\"#ff7e67\"} type={\"elbow\"} />\r\n              <Label\r\n                backgroundFill=\"white\"\r\n                showAnchorLine={\"true\"}\r\n                anchorLineStroke={\"#214599\"}\r\n                backgroundProps={{ stroke: \"#ecf4f3\" }}\r\n                fontColor={\"#133299\"}\r\n                horizontalAnchor={\"start\"}\r\n                title={\"最適植栽本数\"}\r\n                titleFontSize={12}\r\n                titleFontWeight={800}\r\n                titleProps={{ textAnchor: \"middle\" }}\r\n                subtitle={optP + \"本\"}\r\n                subtitleFontSize={16}\r\n                subtitleDy={2}\r\n                subtitleProps={{ textAnchor: \"middle\" }}\r\n                verticalAnchor={\"middle\"}\r\n                width={100}\r\n              />\r\n              <LineSubject\r\n                orientation={\"vertical\"}\r\n                stroke={\"#22A\"}\r\n                min={balanceScale(yBottom)}\r\n                max={balanceScale(yTop)}\r\n              />\r\n            </Annotation>\r\n          </Group>\r\n        </svg>\r\n        {/* 凡例 */}\r\n        <Card\r\n          variant=\"outlined\"\r\n          sx={{\r\n            width: 150,\r\n            height: 40,\r\n            position: 'relative',\r\n            top: -475,\r\n            left: 500,\r\n          }}\r\n        >\r\n          <CardContent\r\n            sx={{\r\n              fontSize: 12,\r\n              align: \"center\",\r\n              lineHeight: 1.5,\r\n              ml: 1,\r\n              mr: 1,\r\n              mt: 0,\r\n              p: 0,\r\n            }}\r\n          >\r\n            <LegendOrdinal\r\n              scale={legendScale}\r\n              direction=\"column\"\r\n              itemDirection=\"row\"\r\n              shape=\"line\"\r\n              labelMargin=\"0 15px 0 0\"\r\n            />\r\n          </CardContent>\r\n        </Card>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default OptimalPlanting;\r\n\r\n","// LEVタイムコースグラフ\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\n//\r\nimport { scaleLinear } from '@visx/scale';\r\nimport { AxisLeft, AxisBottom } from '@visx/axis';\r\nimport { GridRows, GridColumns } from '@visx/grid';\r\nimport { Group } from '@visx/group';\r\nimport { curveBasis, curveLinear } from '@visx/curve';\r\nimport { LinePath } from '@visx/shape';\r\nimport { Annotation, Label, Connector, CircleSubject } from '@visx/annotation';\r\n//\r\n\r\n\r\n// LEV計算\r\nconst ChartLEV = (lev, mai, optVol) => {\r\n  const dataLEV = lev.levTimeCourse(mai);\r\n  const maxLEV = dataLEV[1].reduce((a, b) => Math.max(a, b));\r\n  const yearLevMax = dataLEV[1].indexOf(maxLEV) + 1;\r\n  const yearOpt = optVol / mai;\r\n  const levOpt = lev.lev(optVol, yearOpt) / 10000;\r\n  //console.log(\"year: \" + yearOpt + \", lev: \" + levOpt + \" (\" + (maxLEV - 100) + \")\");\r\n\r\n  // x軸範囲設定\r\n  const xTop = 200;\r\n  const xBottom = 20;\r\n  // y軸範囲設定\r\n  const yTop = Math.round(maxLEV);\r\n  const yBottom = yTop - 100;\r\n  // 曲線描画用データ作成\r\n  const dataLevChart = dataLEV[0].map((d, i) => ({ year: d, lev: dataLEV[1][i] }));\r\n  //console.log(dataLevChart);\r\n  // LEV最大値描画用データ作成\r\n  const dataLevMax = [\r\n    { year: yearLevMax, lev: yBottom },\r\n    { year: yearLevMax, lev: yTop },\r\n  ];\r\n  // 最適材積線描画用データ作成\r\n  const dataOpt = [\r\n    { year: yearOpt, lev: yBottom },\r\n    { year: yearOpt, lev: levOpt },\r\n  ];\r\n  // ゼロ・ラインデータ作成\r\n  const dataZero = [\r\n    {year: 20, lev: 0},\r\n    {year: 200, lev: 0},\r\n  ]\r\n\r\n\r\n  // scales\r\n  const yearScale = scaleLinear({\r\n    domain: [xBottom, xTop],\r\n    clamp: true,\r\n  });\r\n  const levScale = scaleLinear({\r\n    domain: [yBottom, yTop],\r\n    clamp: true,\r\n  });\r\n  // graph margin\r\n  const defaultMargin = { top: 30, right: 30, bottom: 70, left: 70 };\r\n\r\n  // グラフ描画設定\r\n  const svgWidth = 640;\r\n  const svgHeight = 480;\r\n  const background = '#f8f8f8'; // うっすら灰色\r\n  const margin = defaultMargin;\r\n  const xMax = svgWidth - margin.left - margin.right;\r\n  const yMax = svgHeight - margin.top - margin.bottom;\r\n  yearScale.range([0, xMax]);\r\n  levScale.range([yMax, 0]);\r\n\r\n  // 出力\r\n  return (\r\n    <Card\r\n      id=\"LEV-summary\"\r\n      sx={{\r\n        width: 660,\r\n        boxShadow: 3,\r\n      }}\r\n    >\r\n      <CardContent\r\n        sx={{\r\n          m: 0,\r\n          p: 1,\r\n        }}\r\n      >\r\n        <svg width={svgWidth} height={svgHeight}>\r\n          {/* グラフ描画ボックス */}\r\n\r\n          <rect x={0} y={0} width={svgWidth} height={svgHeight} fill={background} rx={14} />\r\n          <Group left={margin.left} top={margin.top}>\r\n            {/* 軸描画 */}\r\n            <GridRows scale={levScale} width={xMax} height={yMax} stroke=\"#e0e0e0\" />\r\n            <GridColumns scale={yearScale} width={xMax} height={yMax} stroke=\"#e0e0e0\" />\r\n            <line x1={xMax} x2={xMax} y1={0} y2={yMax} stroke=\"#e0e0e0\" />\r\n            <AxisBottom\r\n              top={yMax}\r\n              scale={yearScale}\r\n              strokeWidth={1.5}\r\n              // tickLabelProps={{ fontsize: 12, }}\r\n              label={\"年\"}\r\n              labelProps={{ fontSize: 16, textAnchor: \"middle\", }}\r\n            />\r\n            <AxisLeft\r\n              scale={levScale}\r\n              numTicks={5}\r\n              strokeWidth={1.5}\r\n              // tickLabelProps={{ fontsize: 12, }}\r\n              label={\"LEV（万円）\"}\r\n              labelProps={{ fontSize: 16, textAnchor: \"middle\", }}\r\n            />\r\n            {/* LEVタイムコース */}\r\n            <LinePath\r\n              data={dataLevChart}\r\n              curve={curveBasis}\r\n              x={(d) => yearScale(d.year) ?? 0}\r\n              y={(d) => levScale(d.lev) ?? 0}\r\n              stroke=\"#000000\"\r\n              strokeWidth={3}\r\n              strokeOpacity={0.8}\r\n            />\r\n            {/* LEV最大値ライン */}\r\n            <LinePath\r\n              data={dataLevMax}\r\n              curve={curveLinear}\r\n              x={(d) => yearScale(d.year) ?? 0}\r\n              y={(d) => levScale(d.lev) ?? 0}\r\n              stroke=\"#ff6600\"\r\n              strokeWidth={2}\r\n              strokeOpacity={1}\r\n            />\r\n            {/* 最適材積ライン */}\r\n            <LinePath\r\n              data={dataOpt}\r\n              curve={curveLinear}\r\n              x={(d) => yearScale(d.year) ?? 0}\r\n              y={(d) => levScale(d.lev) ?? 0}\r\n              stroke=\"#00ff66\"\r\n              strokeWidth={2}\r\n              strokeOpacity={1}\r\n            />\r\n            {/* ゼロライン */}\r\n            <LinePath\r\n              data={dataZero}\r\n              curve={curveLinear}\r\n              x={(d) => yearScale(d.year) ?? 0}\r\n              y={(d) => levScale(d.lev) ?? 0}\r\n              stroke={maxLEV > 0? \"#0033ff\" : \"\"}\r\n              strokeWidth={2}\r\n              strokeOpacity={1}\r\n              strokeDasharray={[2,3]}\r\n            />\r\n            {/* 注釈-最適材積 */}\r\n            <Annotation\r\n              x={yearScale(dataOpt[1].year) ?? 0}\r\n              y={levScale(dataOpt[1].lev) ?? 0}\r\n              dx={0}\r\n              dy={levScale(dataOpt[1].lev) > 200 ? -100 : 120}\r\n            >\r\n              <CircleSubject\r\n                radius={14}\r\n                stroke={\"#00ff66\"}\r\n              />\r\n              <Connector stroke={\"#00ff66\"} type={\"straight\"} />\r\n              <Label\r\n                backgroundFill={\"white\"}\r\n                showAnchorLine={\"true\"}\r\n                anchorLineStroke={\"#00ff66\"}\r\n                backgroundProps={{ stroke: \"#00ff66\" }}\r\n                backgroundPadding={{ top: 5, right: 5, bottom: 10, left: 5 }}\r\n                fontColor={\"#000033\"}\r\n                horizontalAnchor={\"middle\"}\r\n                verticalAnchor={\"top\"}\r\n                title={\"最適材積 LEV\"}\r\n                titleFontSize={12}\r\n                titleFontWeight={800}\r\n                titleProps={{ textAnchor: \"middle\" }}\r\n                subtitle={\r\n                  Math.round(levOpt) + \" 万円, \"\r\n                  + Math.round(yearOpt) + \" 年  \"\r\n                  + \"(\" + Math.round(optVol) + \" m3)\"\r\n                }\r\n                subtitleFontSize={14}\r\n                subtitleDy={2}\r\n                subtitleProps={{ textAnchor: \"middle\" }}\r\n                width={120}\r\n              />\r\n            </Annotation>\r\n            {/* 注釈-maxLEV */}\r\n            <Annotation\r\n              x={yearScale(dataLevMax[1].year) ?? 0}\r\n              y={levScale(dataLevMax[1].lev) ?? 0}\r\n              dx={0}\r\n              dy={40}\r\n            >\r\n              <CircleSubject\r\n                radius={14}\r\n                stroke={\"#ff6600\"}\r\n              />\r\n              <Connector stroke={\"#ff6600\"} type={\"straight\"} />\r\n              <Label\r\n                backgroundFill={\"white\"}\r\n                showAnchorLine={\"true\"}\r\n                anchorLineStroke={\"#ff6600\"}\r\n                backgroundProps={{ stroke: \"#ff6600\" }}\r\n                backgroundPadding={{ top: 5, right: 5, bottom: 10, left: 5 }}\r\n                fontColor={\"#000033\"}\r\n                horizontalAnchor={\"middle\"}\r\n                verticalAnchor={\"top\"}\r\n                title={\"最大 LEV\"}\r\n                titleFontSize={12}\r\n                titleFontWeight={800}\r\n                titleProps={{ textAnchor: \"middle\" }}\r\n                subtitle={\r\n                  Math.round(maxLEV) + \" 万円, \"\r\n                  + Math.round(yearLevMax) + \" 年  \"\r\n                  + \"(\" + Math.round(mai * yearLevMax) + \" m3)\"\r\n                }\r\n                subtitleFontSize={14}\r\n                subtitleDy={2}\r\n                subtitleProps={{ textAnchor: \"middle\" }}\r\n                width={120}\r\n              />\r\n            </Annotation>\r\n\r\n          </Group>\r\n        </svg>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ChartLEV;\r\n","//\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport { useState } from 'react';\n//\nimport AppBar from '@mui/material/AppBar';\nimport Box from '@mui/material/Box';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport Divider from '@mui/material/Divider';\nimport Drawer from '@mui/material/Drawer';\nimport IconButton from '@mui/material/IconButton';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport Toolbar from '@mui/material/Toolbar';\nimport Typography from '@mui/material/Typography';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport CardActions from '@mui/material/CardActions';\nimport ChevronLeftIcon from '@mui/icons-material/ChevronLeft';\nimport ChevronRightIcon from '@mui/icons-material/ChevronRight';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport Collapse from '@mui/material/Collapse';\nimport { styled, useTheme } from '@mui/material/styles';\n//\nimport SliderHeight from './slider-height';\nimport SliderPlanting from './slider-planting';\nimport SliderPriceSapling from './slider-sapling_price';\nimport SliderRevenue from './slider-revenue';\nimport SliderCostManagement from './slider-management_cost';\nimport SliderMAI from './slider-MAI';\nimport SelectorSp from './selector-sp';\nimport SelectorID from './selector-id';\nimport SelectorDR from './selector-DR';\nimport SelectorPY from './selector-PY';\n//\nimport CalcSDMSummary from './card-sdm';\nimport DrawSDMDiagram from './sdm-diagram';\nimport CalcLEVSummary from './card-lev';\nimport OptimalPlanting from './optimal-planting';\nimport ChartLEV from './card-lev_time_course';\n\n// ドロワーのサイズ\nconst drawerWidth = 480;\n\n\nfunction App(props) {\n  // props の継承（特に設定はしていない）\n  const { window } = props;\n  // Theme の利用\n  const theme = useTheme();\n\n  // ドロワーヘッダ\n  const DrawerHeader = styled('div')(({ theme }) => ({\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  }));\n\n  // 開閉ボタン動作\n  const ExpandMore = styled((props) => {\n    const { expand, ...other } = props;\n    return <IconButton {...other} />;\n  })(({ theme, expand }) => ({\n    transform: !expand ? 'rotate(0deg)' : 'rotate(180deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  }));\n\n  // ドロワー開閉ハンドラ\n  const [mobileOpen, setMobileOpen] = useState(false);\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  // カード開閉トグルハンドラ\n  const [expanded1, setExpanded1] = useState(true);\n  const handleExpand1Click = () => {\n    setExpanded1(!expanded1);\n  };\n  const [expanded2, setExpanded2] = useState(false);\n  const handleExpand2Click = () => {\n    setExpanded2(!expanded2);\n  };\n  const [expanded3, setExpanded3] = useState(false);\n  const handleExpand3Click = () => {\n    setExpanded3(!expanded3);\n  };\n  const [expanded4, setExpanded4] = useState(false);\n  const handleExpand4Click = () => {\n    setExpanded4(!expanded4);\n  };\n\n  // store => ローカルデータ\n  const localID = useSelector(state => state.id);\n  const localSDM = useSelector(state => state.sdm);\n  const localDV = useSelector(state => state.dv);\n  const localHeight = useSelector(state => state.height);\n  const localPlanting = useSelector(state => state.planting);\n  const localOptP = useSelector(state => state.optPlanting);\n  const localOptV = useSelector(state => state.optVolume);\n  const localLEV = useSelector(state => state.lev);\n  const localPriceS = useSelector(state => state.priceSapling);\n  const localCostM = useSelector(state => state.costManagement);\n  const localMAI = useSelector(state => state.mai)\n\n  //ドロワーの内容。 hook 利用のため、別モジュール化はできないみたい\n  const drawer = (\n    <div>\n      <Toolbar />\n      <Divider />\n      {SelectorSp()} {SelectorID()}\n      <Divider sx={{ mb: { xs: 2, sm: 3 }, }} />\n      <Box sx={{ p: { xs: 1, sm: 2 }, px: { xs: 3, sm: 2 }, }}> {SliderHeight()} </Box>\n      <Box sx={{ p: { xs: 1, sm: 2 }, px: { xs: 3, sm: 2 }, }}> {SliderPlanting()}  </Box>\n      <Divider sx={{ mb: { xs: 2, sm: 3 }, }} />\n      <Box sx={{ p: { xs: 1, sm: 2 }, px: { xs: 3, sm: 2 }, }}> {SliderRevenue()} </Box>\n      <Box sx={{ p: { xs: 1, sm: 2 }, px: { xs: 3, sm: 2 }, }}> {SliderPriceSapling()} </Box>\n      <Box sx={{ p: { xs: 1, sm: 2 }, px: { xs: 3, sm: 2 }, }}> {SliderCostManagement()} </Box>\n      <Box sx={{ p: { xs: 1, sm: 2 }, px: { xs: 3, sm: 2 }, }}> {SliderMAI()} </Box>\n      <List>\n        <ListItem\n          sx={{\n            mx: \"auto\",\n            ml: 0,\n            p: 0,\n            width: {xs: 180,},\n          }}\n        >\n          {SelectorDR()}\n          {SelectorPY()}\n        </ListItem>\n      </List>\n    </div>\n  )\n\n  // ウィンドウサイズ判定スイッチ\n  console.log(\"window: \" + window);\n  const container = window !== undefined ? () => window().document.body : undefined;\n\n  // 出力本体\n  return (\n    <Box sx={{ display: 'flex' }}>\n      <CssBaseline />\n      <AppBar\n        position=\"fixed\"\n        sx={{\n          width: { sm: `calc(100% - ${drawerWidth}px)` },\n          ml: { xs: 1, sm: `${drawerWidth}px` },\n        }}\n      >\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            edge=\"start\"\n            onClick={handleDrawerToggle}\n            sx={{ mr: 2, display: { sm: 'none' } }}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap component=\"div\">\n            LEV on Stand Density Management\n          </Typography>\n        </Toolbar>\n      </AppBar>\n\n      {/* ドロワー */}\n      <Box\n        component=\"nav\"\n        sx={{ width: { xs: 250, sm: 320, md: drawerWidth }, flexShrink: { sm: 0 } }}\n      >\n        {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n        {/* 折り畳みドロワー（小画面用） */}\n        <Drawer\n          container={container}\n          variant=\"temporary\"\n          open={mobileOpen}\n          onClose={handleDrawerToggle}\n          ModalProps={{\n            keepMounted: true, // Better open performance on mobile.\n          }}\n          sx={{\n            display: { xs: 'block', sm: 'none' },\n            '& .MuiDrawer-paper': { boxSizing: 'border-box', width: 250 },\n            width: 250,\n          }}\n        >\n          <DrawerHeader sx={{width: 250,}}>\n            <IconButton\n              edge=\"start\"\n              onClick={handleDrawerToggle}\n            >\n              {theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n            </IconButton>\n          </DrawerHeader>\n          {drawer}\n        </Drawer>\n\n        {/* 表示ドロワー（大画面用） */}\n        <Drawer\n          variant=\"permanent\"\n          sx={{\n            display: { xs: 'none', sm: 'block' },\n            '& .MuiDrawer-paper': { boxSizing: 'border-box', width: drawerWidth },\n          }}\n          open\n        >\n          {drawer}\n        </Drawer>\n      </Box>\n\n      {/* メイン画面 */}\n        <Toolbar />\n        {localID !== \"\" ? (\n          <Card\n            id='Result-Card'\n            sx={{\n              elevation: 2,        // 表現としてのカードの配置（＝陰の大きさ）\n              width: { sm: `calc(100% - ${drawerWidth}px)` },\n              p: 6,\n              minWidth: 680,       // 最小カード幅（これ以上は小さくならない\n              zIndex: 2,           // 仮想上のカード配置（メニューよりうえに表示）\n            }}\n          >\n            {/* 密度管理図カード引き出し*/}\n            <CardActions disableSpacing sx={{ fontWeight: 'bold', fontSize: 24, }}>\n              ［密度管理図］\n              <ExpandMore\n                expand={expanded1}\n                onClick={handleExpand1Click}\n                aria-expanded={expanded1}\n                aria-label=\"show more\"\n              >\n                < ExpandMoreIcon />\n              </ExpandMore>\n            </CardActions>\n            <Collapse in={expanded1} timeout=\"auto\" unmountOnExit>\n              <CardContent\n                sx={{\n                  p: 1,\n                  m: 0,\n                }}\n              >\n                {DrawSDMDiagram(localID, localPlanting, localDV)}\n                {CalcSDMSummary(localSDM, localHeight, localPlanting)}\n              </CardContent>\n            </Collapse>\n            <Divider sx={{ mb: { xs: 2 }, }} />\n\n            {/* 最適植栽密度グラフカード引き出し*/}\n            <CardActions disableSpacing sx={{ fontWeight: 'bold', fontSize: 24, }}>\n              ［最適植栽本数］\n              <ExpandMore\n                expand={expanded2}\n                onClick={handleExpand2Click}\n                aria-expanded={expanded2}\n                aria-label=\"show more\"\n              >\n                < ExpandMoreIcon />\n              </ExpandMore>\n            </CardActions>\n            <Collapse in={expanded2} timeout=\"auto\" unmountOnExit>\n              <CardContent\n                sx={{\n                  p: 1,\n                  m: 1,\n                }}\n              >\n                {OptimalPlanting(localSDM, localLEV, localHeight, localPriceS, localCostM, localOptP, localOptV)}\n              </CardContent>\n            </Collapse>\n            <Divider sx={{ mb: { xs: 2 }, }} />\n\n            {/* LEV結果カード引き出し*/}\n            <CardActions disableSpacing sx={{ fontWeight: 'bold', fontSize: 24, }}>\n              ［LEVに基づく収益判断］\n              <ExpandMore\n                expand={expanded3}\n                onClick={handleExpand3Click}\n                aria-expanded={expanded3}\n                aria-label=\"show more\"\n              >\n                < ExpandMoreIcon />\n              </ExpandMore>\n            </CardActions>\n            <Collapse in={expanded3} timeout=\"auto\" unmountOnExit>\n              <CardContent>\n                {CalcLEVSummary(localSDM, localLEV, localOptP, localOptV, localMAI, localPriceS, localCostM)}\n              </CardContent>\n            </Collapse>\n            <Divider sx={{ mb: { xs: 2 }, }} />\n\n            {/* LEV結果カード引き出し*/}\n            <CardActions disableSpacing sx={{ fontWeight: 'bold', fontSize: 24, }}>\n              ［LEVチャート］\n              <ExpandMore\n                expand={expanded4}\n                onClick={handleExpand4Click}\n                aria-expanded={expanded4}\n                aria-label=\"show more\"\n              >\n                < ExpandMoreIcon />\n              </ExpandMore>\n            </CardActions>\n            <Collapse in={expanded4} timeout=\"auto\" unmountOnExit>\n              <CardContent>\n                {ChartLEV(localLEV, localMAI, localOptV)}\n              </CardContent>\n            </Collapse>\n            <Divider sx={{ mb: { xs: 2 }, }} />\n          </Card>\n        )\n          : \"\"}\n    </Box>\n  );\n}\n\nApp.propTypes = {\n  /**\n   * Injected by the documentation to work in an iframe.\n   * You won't need it on your project.\n   */\n  window: PropTypes.func,\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","/* \r\n  Land Expectation Value 推定用のクラス\r\n\r\n*/\r\nimport brentsMethod from 'brents-method';\r\n\r\nclass LEV{\r\n  // 初期値\r\n  constructor(rPN, cM, cS, pY, dR){\r\n    this.revenueProductionNet = rPN ?? 3500;  // 材販売純益（販売コストは先に減じておく）\r\n    this.costManagement = cM ?? 2e6;           // 育林コスト\r\n    this.costSapling = cS ?? 100*2500;        // 苗木コスト\r\n    this.processYield = pY ?? 0.8;            // 歩留まり\r\n    this.discountingRate = dR ?? 1;           // 値引率（実質金利）%で\r\n  };\r\n\r\n  //パラメータ設定\r\n  setParms (rPN, cM, cS, pY, dR){\r\n    this.revenueProductionNet = rPN;\r\n    this.costManagement = cM;\r\n    this.costSapling = cS;\r\n    this.processYield = pY;\r\n    this.discountingRate = dR;\r\n  };\r\n\r\n  // Expectation Value の計算\r\n  fc (volume){\r\n    return(\r\n      volume*this.processYield*this.revenueProductionNet\r\n    );\r\n  };\r\n\r\n  // NPV 計算\r\n  npv (volume, year) {\r\n    return(\r\n      this.fc(volume)/(1+this.discountingRate/100)**year - (this.costManagement + this.costSapling)\r\n    );\r\n  };\r\n\r\n  // LEV 計算\r\n  lev (volume, year){\r\n    return(\r\n      this.npv(volume, year) / (1 - (1/(1 + this.discountingRate/100))**year) \r\n      );\r\n  };\r\n\r\n  // threshold 計算\r\n  threshold (volume) {\r\n    const resultY =  Math.log((this.costManagement + this.costSapling)/this.fc(volume))/(-Math.log(1+this.discountingRate/100));\r\n    return(resultY > 0  ? Math.floor(resultY) : NaN);\r\n  }\r\n\r\n  // irr 計算\r\n  irr (balance){\r\n    return brentsMethod(\r\n      r => balance.reduce((out, x) => {\r\n        return out[1] + x[1]/(1 + r)**x[0]\r\n      }),\r\n      0,\r\n      1,\r\n      { errorTolerance: 1e-5, maxIterations: 100 },\r\n    )\r\n  }\r\n\r\n  // LEV時間変化\r\n  // 設定されているパラメータで0-250年までのLEVを出力\r\n  levTimeCourse (mai){\r\n    const year = [...Array(200)].map((x, index) => (index + 1));\r\n    // 出力結果を転置したいので、テンポラルに out を挟む\r\n    const out = year.map ((y) => [y, (this.lev(mai*y, y) / 10000)]);\r\n    // 行列転置スクリプト\r\n    // 一行めのデータのみ使って、一つめの map で列番号を抽出し、二つめのmapで元の配列の特定列データのみを出力\r\n    return out[0].map((_, c) => out.map(r => r[c]));\r\n  } \r\n\r\n};\r\n\r\nexport default LEV;","//\r\n// stage-2 の Reducer セット\r\n//\r\nimport SDMDiagram from './sdm-core';\r\nimport LEV from './lev-core';\r\n\r\n// store の初期値設定\r\nconst initialState = {\r\n  sp: '',                      // 樹種\r\n  id: '',                      // 密度管理図パラメータ参照ID\r\n  sdm: new SDMDiagram(0),       // 密度管理オブジェクト\r\n  height: 10,                 // 樹高 （m）\r\n  planting: 2500,             // 植栽苗木本数 （本／ha）\r\n  dv: '',                   // 材積・密度出力値（m3／ha, 本／ha）\r\n  optPlanting: [null],\r\n  optVolume: [null],\r\n  revenue: 4000,         // 伐出純益 （円／m3／ha）\r\n  priceSapling: 100,     // 苗木コスト （円／本）\r\n  costManagement: 200,   // 造・育林コスト （百万円／ha）\r\n  lev: [null],\r\n  mai: 10.0,             // 平均年成長量 （m3／ha／年）\r\n  discountingRate: 1.0,  // 割引率（実質金利） （ % ）\r\n  processYield: 0.8      // 丸太製材歩留\r\n}\r\n// Reducer\r\nconst levOnSDM = (state = initialState, action) =>{\r\n  //Reducer 本体\r\n  switch (action.type) {\r\n    // 密度管理図パラメータID設定\r\n    case 'SET_SP':{\r\n      return {\r\n        ...state,\r\n        sp: action.payload,\r\n      };\r\n    } \r\n    // 密度管理図パラメータID設定\r\n    case 'SET_ID':{\r\n      return {\r\n        ...state,\r\n        id: action.payload,\r\n        sdm: new SDMDiagram(action.payload),\r\n        dv: state.sdm.PH2DV2(state.height, state.planting),\r\n        optPlanting:  Math.floor(state.sdm.OptimalPlanting(state.height, state.revenue * state.processYield, state.priceSapling, state.costManagement * 1e4)),\r\n        optVolume: state.sdm.PH2DV2(state.height, state.optPlanting).volume,\r\n        lev: new LEV(state.revenue, state.costManagement * 1e4, state.optPlanting * state.priceSapling, state.processYield, state.discountingRate),\r\n      };\r\n    } \r\n    // 樹高設定\r\n    case 'SET_HEIGHT':{\r\n      const estPlanting = state.sdm == null ? null : Math.floor(state.sdm.OptimalPlanting(action.payload, state.revenue * state.processYield, state.priceSapling, state.costManagement * 1e4));\r\n      const estVolume = state.sdm == null ? null : state.sdm.PH2DV2(action.payload, estPlanting).volume\r\n      return {\r\n        ...state,\r\n        height: action.payload,\r\n        dv: state.sdm == null ? null : state.sdm.PH2DV2(action.payload, estPlanting),\r\n        optPlanting: estPlanting,\r\n        optVolume: estVolume,\r\n        lev: new LEV(state.revenue, state.costManagement * 1e4, estPlanting * state.priceSapling, state.processYield, state.discountingRate),\r\n      };\r\n    }\r\n    // 植栽本数設定\r\n    case 'SET_PLANTING':{\r\n      return {\r\n        ...state,\r\n        planting: action.payload,\r\n        dv: state.sdm == null ? null : state.sdm.PH2DV2(state.height, action.payload),\r\n      };\r\n    }\r\n    // 密度・材積セット更新\r\n    case 'SET_DV':{\r\n      return {\r\n        ...state,\r\n        dv: state.sdm == null ? null : state.sdm.PH2DV2(state.height, state.planting),\r\n      };\r\n    }\r\n    // 伐出純益設定\r\n    case 'SET_REVENUE':{\r\n      const estPlanting = Math.floor(state.sdm.OptimalPlanting(state.height, action.payload * state.processYield, state.priceSapling, state.costManagement * 1e4));\r\n      const estVolume = state.sdm.PH2DV2(state.height, estPlanting).volume;\r\n      return {\r\n        ...state,\r\n        revenue: action.payload,\r\n        optPlanting: estPlanting,\r\n        optVolume: estVolume,\r\n        lev: new LEV(action.payload, state.costManagement * 1e4, estPlanting * state.priceSapling, state.processYield, state.discountingRate),\r\n      };\r\n    }\r\n    // 苗木コスト設定\r\n    case 'SET_SAPLING_PRISE':{\r\n      const estPlanting = Math.floor(state.sdm.OptimalPlanting(state.height, state.revenue * state.processYield, action.payload, state.costManagement * 1e4));\r\n      const estVolume = state.sdm.PH2DV2(state.height, estPlanting).volume;\r\n      return {\r\n        ...state,\r\n        priceSapling: action.payload,\r\n        optPlanting: estPlanting,\r\n        optVolume: estVolume,\r\n        lev: new LEV(state.revenue, state.costManagement * 1e4, estPlanting * action.payload, state.processYield, state.discountingRate),\r\n      };\r\n    }\r\n    // 造・育林コスト設定\r\n    case 'SET_MANAGEMENT_COST':{\r\n      const estPlanting = Math.floor(state.sdm.OptimalPlanting(state.height, state.revenue * state.processYield, state.priceSapling, action.payload * 1e4));\r\n      const estVolume = state.sdm.PH2DV2(state.height, estPlanting).volume;\r\n      return {\r\n        ...state,\r\n        costManagement: action.payload,\r\n        optPlanting: estPlanting,\r\n        optVolume: estVolume,\r\n        lev: new LEV(state.revenue, action.payload * 1e4, estPlanting * state.priceSapling, state.processYield, state.discountingRate),\r\n      };\r\n    }\r\n    // MAI設定\r\n    case 'SET_MAI':{\r\n      return {\r\n        ...state,\r\n        mai: action.payload,\r\n        lev: new LEV(state.revenue, state.costManagement * 1e4, state.optPlanting * state.priceSapling, state.processYield, state.discountingRate),\r\n      };\r\n    }\r\n    // 割引率設定\r\n    case 'SET_DISCOUNTING_RATE':{\r\n      return {\r\n        ...state,\r\n        discountingRate: action.payload,\r\n        //optPlanting:  Math.floor(state.sdm.OptimalPlanting(state.height, state.revenue * state.processYield, state.priceSapling, state.costManagement * 1e4)),\r\n        //optVolume: state.sdm.PH2DV2(state.height, state.optPlanting).volume,\r\n        lev: new LEV(state.revenue, state.costManagement * 1e4, state.optPlanting * state.priceSapling, state.processYield, action.payload),\r\n      };\r\n    }\r\n    // 丸太歩留設定\r\n    case 'SET_PROCESS_YIELD':{\r\n      return {\r\n        ...state,\r\n        processYield: action.payload,\r\n        lev: new LEV(state.revenue, state.costManagement * 1e4, state.optPlanting * state.priceSapling, action.payload, state.discountingRate),\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n// reducer ここまで\r\n\r\nexport default levOnSDM;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n//\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport levOnSDM from './reducer-LEVonSDM';\n\n// reducer 用にstoreを作る\nconst store = createStore(levOnSDM, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n\nReactDOM.render(\n  <Provider store={store}>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}